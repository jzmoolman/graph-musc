{"ast":null,"code":"import { ArrayToStr } from '../tools/graphtools';\nexport const loadGeneData = async (driver, verified, genes, organs, graphScheme, onData) => {\n  console.log('enter - loadData');\n\n  if (driver == null) {\n    console.log('Driver not loaded');\n    return;\n  }\n\n  const str_genes = ArrayToStr(genes);\n  const str_organs = ArrayToStr(organs);\n  let whereCLAUSE = '';\n\n  if (verified) {\n    whereCLAUSE = 'WHERE g.FinalVerdict = 1';\n  } else {\n    whereCLAUSE = 'WHERE g.FinalVerdict = 0';\n  }\n\n  console.log(genes, organs);\n\n  if (str_genes !== '') {\n    whereCLAUSE = whereCLAUSE + ' AND g.name IN ' + str_genes;\n  }\n\n  if (str_organs !== '') {\n    whereCLAUSE = whereCLAUSE + ' AND o.name IN ' + str_organs;\n  }\n\n  const query = `MATCH (g:MGene)-[r]->(o:Organ) ${whereCLAUSE} RETURN g,r,o`;\n  console.log('Gene->Orgran', query);\n  let session = driver.session();\n\n  try {\n    let res = await session.run(query);\n    let ids = new Set();\n    let nodes = [];\n    let links = [];\n    res.records.forEach(row => {\n      let link = {\n        source: '',\n        target: ''\n      };\n      const source = row.get('g');\n\n      if (!ids.has(source.properties.name)) {\n        let node = {\n          id: source.identity,\n          name: source.properties.name,\n          nodeType: 'Gene',\n          nodeColor: graphScheme.geneNode,\n          fontColor: graphScheme.geneFont,\n          nodeVal: graphScheme.nodeVal,\n          nodeRelSize: graphScheme.nodeRelSize,\n          scaleFont: graphScheme.scaleFont\n        };\n        nodes.push(node);\n        link.source = node.name;\n        ids.add(node.name);\n      } else {\n        link.source = source.properties.name;\n      }\n\n      const target = row.get('o');\n\n      if (!ids.has(target.properties.name)) {\n        let node = {\n          id: target.identity,\n          name: target.properties.name,\n          nodeType: 'Organ',\n          nodeColor: graphScheme.organNode,\n          fontColor: graphScheme.organFont,\n          nodeVal: graphScheme.nodeVal,\n          nodeRelSize: graphScheme.nodeRelSize,\n          scaleFont: graphScheme.scaleFont\n        };\n        nodes.push(node);\n        link.target = node.name;\n        ids.add(node.name);\n      } else {\n        link.target = target.properties.name;\n      }\n\n      links.push(link);\n    });\n    console.log(nodes);\n    console.log(links);\n    console.log('Data loaded');\n    session.close();\n    console.log('nodes', nodes);\n    onData({\n      nodes,\n      links\n    });\n  } catch (e) {\n    throw e;\n  } finally {\n    await session.close();\n  }\n};\nexport const loadOrganData = async (driver, verified, genes, organs, graphScheme, onData) => {\n  console.log('enter - loadData');\n\n  if (driver == null) {\n    console.log('Driver not loaded');\n    return;\n  }\n\n  const str_genes = ArrayToStr(genes);\n  const str_organs = ArrayToStr(organs);\n  let whereCLAUSE = '';\n\n  if (verified) {\n    whereCLAUSE = 'WHERE g.FinalVerdict = 1';\n  } else {\n    whereCLAUSE = 'WHERE g.FinalVerdict = 0';\n  }\n\n  console.log(genes, organs);\n\n  if (str_genes !== '') {\n    whereCLAUSE = whereCLAUSE + ' AND g.name IN ' + str_genes;\n  }\n\n  if (str_organs !== '') {\n    whereCLAUSE = whereCLAUSE + ' AND o.name IN ' + str_organs;\n  }\n\n  const query = `MATCH (g:MGene)-[r]->(o:Organ) ${whereCLAUSE} RETURN g,r,o`;\n  console.log('Gene->Orgran', query);\n  let session = driver.session();\n\n  try {\n    let res = await session.run(query);\n    let ids = new Set();\n    let nodes = [];\n    let links = [];\n    res.records.forEach(row => {\n      let link = {\n        source: '',\n        target: ''\n      };\n      const source = row.get('o');\n\n      if (!ids.has(source.properties.name)) {\n        let node = {\n          id: source.identity,\n          name: source.properties.name,\n          nodeType: 'Organ',\n          nodeColor: graphScheme.organNode,\n          fontColor: graphScheme.organFont,\n          nodeVal: graphScheme.nodeVal,\n          nodeRelSize: graphScheme.nodeRelSize,\n          scaleFont: graphScheme.scaleFont\n        };\n        nodes.push(node);\n        link.source = node.name;\n        ids.add(node.name);\n      } else {\n        link.source = source.properties.name;\n      }\n\n      const target = row.get('g');\n\n      if (!ids.has(target.properties.name)) {\n        let node = {\n          id: target.identity,\n          name: target.properties.name,\n          nodeType: 'Gene',\n          nodeColor: graphScheme.geneNode,\n          fontColor: graphScheme.geneFont,\n          nodeVal: graphScheme.nodeVal,\n          nodeRelSize: graphScheme.nodeRelSize,\n          scaleFont: graphScheme.scaleFont\n        };\n        nodes.push(node);\n        link.target = node.name;\n        ids.add(node.name);\n      } else {\n        link.target = target.properties.name;\n      }\n\n      links.push(link);\n    });\n    console.log('Data loaded');\n    console.log(nodes);\n    console.log(links);\n    session.close();\n    onData({\n      nodes,\n      links\n    });\n  } catch (e) {\n    throw e;\n  } finally {\n    await session.close();\n  }\n};\nexport const loadSyndromeGeneData = async (driver, verified, syndromes, genes, graphScheme, onData) => {\n  console.log('enter - loadData');\n\n  if (driver == null) {\n    console.log('Driver not loaded');\n    return;\n  }\n\n  const str_genes = ArrayToStr(genes);\n  const str_syndrome = ArrayToStr(syndromes);\n  let whereCLAUSE = '';\n\n  if (verified) {\n    whereCLAUSE = 'WHERE g.FinalVerdict = 1';\n  } else {\n    whereCLAUSE = 'WHERE g.FinalVerdict = 0';\n  }\n\n  console.log(genes, genes);\n\n  if (str_genes !== '') {\n    whereCLAUSE = whereCLAUSE + ' AND g.name IN ' + str_genes;\n  }\n\n  if (str_syndrome !== '') {\n    whereCLAUSE = whereCLAUSE + ' AND s.name IN ' + str_syndrome;\n  }\n\n  const query = `MATCH (g:MGene)-[r]->(s:Syndrome) ${whereCLAUSE} RETURN g,r,s`;\n  console.log('Syndrome->Gene', query);\n  let session = driver.session();\n\n  try {\n    let res = await session.run(query);\n    let ids = new Set();\n    let nodes = [];\n    let links = [];\n    res.records.forEach(row => {\n      let link = {\n        source: '',\n        target: ''\n      };\n      const source = row.get('s');\n\n      if (!ids.has(source.properties.name)) {\n        let node = {\n          id: source.identity,\n          name: source.properties.name,\n          nodeType: 'Syndrome',\n          nodeColor: graphScheme.syndromeNode,\n          fontColor: graphScheme.syndromeFont,\n          nodeVal: graphScheme.nodeVal,\n          nodeRelSize: graphScheme.nodeRelSize,\n          scaleFont: graphScheme.scaleFont\n        };\n        nodes.push(node);\n        link.source = node.name;\n        ids.add(node.name);\n      } else {\n        link.source = source.properties.name;\n      }\n\n      let target = row.get('g');\n\n      if (!ids.has(target.properties.name)) {\n        let node = {\n          id: target.identity,\n          name: target.properties.name,\n          nameType: 'Gene',\n          nodeColor: graphScheme.geneNode,\n          fontColor: graphScheme.geneFont,\n          nodeVal: graphScheme.nodeVal,\n          nodeRelSize: graphScheme.nodeRelSize,\n          scaleFont: graphScheme.scaleFont\n        };\n        nodes.push(node);\n        link.target = node.name;\n        ids.add(node.name);\n      } else {\n        link.target = target.properties.name;\n      }\n\n      links.push(link);\n    });\n    console.log(nodes);\n    console.log(links);\n    console.log('Data loaded');\n    session.close();\n    console.log('nodes', nodes);\n    onData({\n      nodes,\n      links\n    });\n  } catch (e) {\n    throw e;\n  } finally {\n    await session.close();\n  }\n};\nexport const loadSyndromeOrganData = async (driver, verified, syndromes, organs, graphScheme, onData) => {\n  console.log('enter - loadData');\n\n  if (driver == null) {\n    console.log('Driver not loaded');\n    return;\n  }\n\n  const str_organs = ArrayToStr(organs);\n  const str_syndrome = ArrayToStr(syndromes);\n  let whereCLAUSE = '';\n\n  if (verified) {\n    whereCLAUSE = 'WHERE g.FinalVerdict = 1';\n  } else {\n    whereCLAUSE = 'WHERE g.FinalVerdict = 0';\n  }\n\n  console.log(organs, organs);\n\n  if (str_organs !== '') {\n    whereCLAUSE = whereCLAUSE + ' AND o.name IN ' + str_organs;\n  }\n\n  if (str_syndrome !== '') {\n    whereCLAUSE = whereCLAUSE + ' AND s.name IN ' + str_syndrome;\n  }\n\n  const query = `MATCH (g:MGene)-[r]->(s:Syndrome), (g:MGene)-[r2]->(o:Organ) ${whereCLAUSE} RETURN o,r2,s`;\n  console.log('Syndrome->Gene', query);\n  let session = driver.session();\n\n  try {\n    let res = await session.run(query);\n    let ids = new Set();\n    let nodes = [];\n    let links = [];\n    res.records.forEach(row => {\n      let link = {\n        source: '',\n        target: ''\n      };\n      const target = row.get('o');\n\n      if (!ids.has(target.properties.name)) {\n        let node = {\n          id: target.identity,\n          name: target.properties.name,\n          nodeType: 'Organ',\n          nodeColor: graphScheme.organNode,\n          fontColor: graphScheme.organFont,\n          nodeVal: graphScheme.nodeVal,\n          nodeRelSize: graphScheme.nodeRelSize,\n          scaleFont: graphScheme.scaleFont\n        };\n        nodes.push(node);\n        link.target = node.name;\n        ids.add(node.name);\n      } else {\n        link.target = target.properties.name;\n      }\n\n      const source = row.get('s');\n\n      if (!ids.has(source.properties.name)) {\n        let node = {\n          id: source.identity,\n          name: source.properties.name,\n          nameType: 'Syndrome',\n          nodeColor: graphScheme.syndromeNode,\n          fontColor: graphScheme.syndromeFont,\n          nodeVal: graphScheme.nodeVal,\n          nodeRelSize: graphScheme.nodeRelSize,\n          scaleFont: graphScheme.scaleFont\n        };\n        nodes.push(node);\n        link.source = node.name;\n        ids.add(node.name);\n      } else {\n        link.source = source.properties.name;\n      }\n\n      links.push(link);\n    });\n    console.log(nodes);\n    console.log(links);\n    console.log('Data loaded');\n    session.close();\n    console.log('nodes', nodes);\n    onData({\n      nodes,\n      links\n    });\n  } catch (e) {\n    throw e;\n  } finally {\n    await session.close();\n  }\n};\nexport const loadSyndromeGeneOrganData = async (driver, verified, syndromes, genes, organs, graphScheme, onData) => {\n  console.log('enter - loadData');\n\n  if (driver == null) {\n    console.log('Driver not loaded');\n    return;\n  }\n\n  const str_syndromes = ArrayToStr(syndromes);\n  const str_genes = ArrayToStr(genes);\n  const str_organs = ArrayToStr(organs);\n  let whereCLAUSE = '';\n\n  if (verified) {\n    whereCLAUSE = 'WHERE g.FinalVerdict = 1';\n  } else {\n    whereCLAUSE = 'WHERE g.FinalVerdict = 0';\n  }\n\n  console.log(organs, organs);\n\n  if (str_organs !== '') {\n    whereCLAUSE = whereCLAUSE + ' AND o.name IN ' + str_organs;\n  }\n\n  if (str_syndromes !== '') {\n    whereCLAUSE = whereCLAUSE + ' AND s.name IN ' + str_syndromes;\n  }\n\n  if (str_genes !== '') {\n    whereCLAUSE = whereCLAUSE + ' AND g.name IN ' + str_genes;\n  }\n\n  const query = `MATCH (g:MGene)-[r]->(s:Syndrome), (g:MGene)-[r2]->(o:Organ) ${whereCLAUSE} RETURN g,o,s`;\n  console.log('Syndrome->Gene-Organ', query);\n  let session = driver.session();\n\n  try {\n    let res = await session.run(query);\n    let ids = new Set();\n    let nodes = [];\n    let links = [];\n    res.records.forEach(row => {\n      let link1 = {\n        source: '',\n        target: ''\n      };\n      let source = row.get('s');\n\n      if (!ids.has(source.properties.name)) {\n        let node = {\n          id: source.identity,\n          name: source.properties.name,\n          nodeColor: graphScheme.syndromeNode,\n          fontColor: graphScheme.syndromeFont,\n          nodeVal: graphScheme.nodeVal,\n          nodeRelSize: graphScheme.nodeRelSize,\n          scaleFont: graphScheme.scaleFont\n        };\n        nodes.push(node);\n        link1.source = node.name;\n        ids.add(node.name);\n      } else {\n        link1.source = source.properties.name;\n      }\n\n      let target = row.get('g');\n\n      if (!ids.has(target.properties.name)) {\n        let node = {\n          id: target.identity,\n          name: target.properties.name,\n          nodeColor: graphScheme.geneNode,\n          fontColor: graphScheme.geneFont,\n          nodeVal: graphScheme.nodeVal,\n          nodeRelSize: graphScheme.nodeRelSize,\n          scaleFont: graphScheme.scaleFont\n        };\n        nodes.push(node);\n        link1.target = node.name;\n        ids.add(node.name);\n      } else {\n        link1.target = target.properties.name;\n      }\n\n      links.push(link1); // Do not push duplicate links\n\n      console.log(\"link\", link1);\n      let link2 = {\n        source: '',\n        target: ''\n      };\n      link2.source = link1.target;\n      target = row.get('o');\n\n      if (!ids.has(target.properties.name)) {\n        let node = {\n          id: target.identity,\n          name: target.properties.name,\n          nodeColor: graphScheme.organNode,\n          fontColor: graphScheme.organFont,\n          nodeVal: graphScheme.nodeVal,\n          nodeRelSize: graphScheme.nodeRelSize,\n          scaleFont: graphScheme.scaleFont\n        };\n        nodes.push(node);\n        link2.target = node.name;\n        ids.add(node.name);\n      } else {\n        link2.target = target.properties.name;\n      }\n\n      links.push(link2);\n    });\n    console.log(nodes);\n    console.log(links);\n    console.log('Data loaded');\n    session.close();\n    console.log('nodes', nodes);\n    onData({\n      nodes,\n      links\n    });\n  } catch (e) {\n    throw e;\n  } finally {\n    await session.close();\n  }\n};","map":{"version":3,"names":["ArrayToStr","loadGeneData","driver","verified","genes","organs","graphScheme","onData","console","log","str_genes","str_organs","whereCLAUSE","query","session","res","run","ids","Set","nodes","links","records","forEach","row","link","source","target","get","has","properties","name","node","id","identity","nodeType","nodeColor","geneNode","fontColor","geneFont","nodeVal","nodeRelSize","scaleFont","push","add","organNode","organFont","close","e","loadOrganData","loadSyndromeGeneData","syndromes","str_syndrome","syndromeNode","syndromeFont","nameType","loadSyndromeOrganData","loadSyndromeGeneOrganData","str_syndromes","link1","link2"],"sources":["/Users/zack/src/_-MUSC/gene-graph-MUSC/src/tools/grapgdata.ts"],"sourcesContent":["\nimport { GraphScheme, Force2DData, ArrayToStr } from '../tools/graphtools'\nimport { Driver }  from  'neo4j-driver'\n\nexport const  loadGeneData = async (driver: Driver | undefined,\n    verified: boolean,\n    genes: string[],\n    organs: string[],\n    graphScheme : GraphScheme,\n    onData:(data: Force2DData)=> void) => {\n    console.log('enter - loadData')\n    if (driver == null) {\n        console.log('Driver not loaded')\n        return \n    }\n\n    const str_genes = ArrayToStr(genes)\n    const str_organs = ArrayToStr(organs)\n\n    let whereCLAUSE = ''\n    \n    if ( verified ) {\n        whereCLAUSE = 'WHERE g.FinalVerdict = 1'\n    } else {\n        whereCLAUSE = 'WHERE g.FinalVerdict = 0'\n    }\n    console.log(genes, organs)\n    if ( str_genes !== '') {\n        whereCLAUSE = whereCLAUSE + ' AND g.name IN ' + str_genes\n    }\n    if ( str_organs !== '') {\n        whereCLAUSE = whereCLAUSE + ' AND o.name IN ' + str_organs\n    }\n    const query = `MATCH (g:MGene)-[r]->(o:Organ) ${whereCLAUSE} RETURN g,r,o`\n\n    console.log('Gene->Orgran', query)\n\n    let session = driver.session()\n\n    try {\n        let res = await session.run(query)\n        let ids = new  Set<string>()\n        let nodes : any[] = []\n        let links : any[] = []\n        res.records.forEach(row => {\n            let link  = { source: '', target: ''}\n            const source = row.get('g') \n            if (!ids.has(source.properties.name)) {\n                let node = { \n                    id: source.identity,\n                    name: source.properties.name,\n                    nodeType: 'Gene',\n                    nodeColor: graphScheme.geneNode, \n                    fontColor: graphScheme.geneFont,\n                    nodeVal: graphScheme.nodeVal,\n                    nodeRelSize: graphScheme.nodeRelSize,\n                    scaleFont: graphScheme.scaleFont\n                }\n                nodes.push(node) \n                link.source = node.name\n                ids.add(node.name)\n            } else {\n                link.source = source.properties.name\n            }\n        \n            const target = row.get('o') \n            if (!ids.has(target.properties.name)) {\n                let node = { \n                    id: target.identity,\n                    name: target.properties.name,\n                    nodeType: 'Organ',\n                    nodeColor: graphScheme.organNode,\n                    fontColor: graphScheme.organFont,\n                    nodeVal: graphScheme.nodeVal,\n                    nodeRelSize: graphScheme.nodeRelSize,\n                    scaleFont: graphScheme.scaleFont\n                }\n                nodes.push(node) \n                link.target = node.name\n                ids.add(node.name)\n            } else {\n                link.target = target.properties.name\n            }\n\n            links.push(link)\n\n        })\n        console.log(nodes) \n        console.log(links) \n        console.log('Data loaded')\n        session.close();\n        console.log('nodes', nodes)\n        onData( {nodes, links} )\n    } catch (e) {\n        throw e\n    }\n    finally {\n        await session.close()\n\n    }\n}\n\n\nexport const  loadOrganData = async (driver: Driver | undefined,\n    verified: boolean,\n    genes: string[],\n    organs: string[],\n    graphScheme : GraphScheme,\n    onData:(data: Force2DData)=> void) => {\n    console.log('enter - loadData')\n    if (driver == null) {\n        console.log('Driver not loaded')\n        return \n    }\n\n    const str_genes = ArrayToStr(genes)\n    const str_organs = ArrayToStr(organs)\n\n    let whereCLAUSE = ''\n    \n    if ( verified ) {\n        whereCLAUSE = 'WHERE g.FinalVerdict = 1'\n    } else {\n        whereCLAUSE = 'WHERE g.FinalVerdict = 0'\n    }\n    console.log(genes, organs)\n    if ( str_genes !== '') {\n        whereCLAUSE = whereCLAUSE + ' AND g.name IN ' + str_genes\n    }\n    if ( str_organs !== '') {\n        whereCLAUSE = whereCLAUSE + ' AND o.name IN ' + str_organs\n    }\n    const query = `MATCH (g:MGene)-[r]->(o:Organ) ${whereCLAUSE} RETURN g,r,o`\n\n    console.log('Gene->Orgran', query)\n\n    let session = driver.session()\n\n    try {\n        let res = await session.run(query)\n        let ids = new  Set<string>()\n        let nodes : any[] = []\n        let links : any[] = []\n        res.records.forEach(row => {\n            let link  = { source: '', target: ''}\n        \n            const source = row.get('o') \n            if (!ids.has(source.properties.name)) {\n                let node = { \n                    id: source.identity,\n                    name: source.properties.name,\n                    nodeType: 'Organ',\n                    nodeColor: graphScheme.organNode,\n                    fontColor: graphScheme.organFont,\n                    nodeVal: graphScheme.nodeVal,\n                    nodeRelSize: graphScheme.nodeRelSize,\n                    scaleFont: graphScheme.scaleFont\n                }\n                nodes.push(node) \n                link.source = node.name\n                ids.add(node.name)\n            } else {\n                link.source = source.properties.name\n            }\n\n            const target = row.get('g') \n            if (!ids.has(target.properties.name)) {\n                let node = { \n                    id: target.identity,\n                    name: target.properties.name,\n                    nodeType: 'Gene',\n                    nodeColor: graphScheme.geneNode, \n                    fontColor: graphScheme.geneFont,\n                    nodeVal: graphScheme.nodeVal,\n                    nodeRelSize: graphScheme.nodeRelSize,\n                    scaleFont: graphScheme.scaleFont\n                }\n                nodes.push(node) \n                link.target = node.name\n                ids.add(node.name)\n            } else {\n                link.target = target.properties.name\n            }\n            links.push(link)\n\n        })\n        console.log('Data loaded')\n        console.log(nodes) \n        console.log(links) \n        session.close();\n        onData( {nodes, links} )\n    } catch (e) {\n        throw e\n    }\n    finally {\n        await session.close()\n\n    }\n}\n\nexport const  loadSyndromeGeneData = async (driver: Driver | undefined,\n    verified: boolean,\n    syndromes: string[],\n    genes: string[],\n    graphScheme : GraphScheme,\n    onData:(data: Force2DData)=> void) => {\n    console.log('enter - loadData')\n    if (driver == null) {\n        console.log('Driver not loaded')\n        return \n    }\n\n    const str_genes = ArrayToStr(genes)\n    const str_syndrome = ArrayToStr(syndromes)\n\n    let whereCLAUSE = ''\n    \n    if ( verified ) {\n        whereCLAUSE = 'WHERE g.FinalVerdict = 1'\n    } else {\n        whereCLAUSE = 'WHERE g.FinalVerdict = 0'\n    }\n    console.log(genes, genes)\n    if ( str_genes !== '') {\n        whereCLAUSE = whereCLAUSE + ' AND g.name IN ' + str_genes\n    }\n    if ( str_syndrome !== '') {\n        whereCLAUSE = whereCLAUSE + ' AND s.name IN ' + str_syndrome\n    }\n\n    const query = `MATCH (g:MGene)-[r]->(s:Syndrome) ${whereCLAUSE} RETURN g,r,s`\n\n    console.log('Syndrome->Gene', query)\n\n    let session = driver.session()\n\n    try {\n        let res = await session.run(query)\n        let ids = new  Set<string>()\n        let nodes : any[] = []\n        let links : any[] = []\n        res.records.forEach(row => {\n            let link  = { source: '', target: ''}\n        \n            const source = row.get('s') \n            if (!ids.has(source.properties.name)) {\n                let node = { \n                    id: source.identity,\n                    name: source.properties.name,\n                    nodeType: 'Syndrome',\n                    nodeColor: graphScheme.syndromeNode,\n                    fontColor: graphScheme.syndromeFont,\n                    nodeVal: graphScheme.nodeVal,\n                    nodeRelSize: graphScheme.nodeRelSize,\n                    scaleFont: graphScheme.scaleFont\n                }\n                nodes.push(node) \n                link.source = node.name\n                ids.add(node.name)\n            } else {\n                link.source = source.properties.name\n            }\n\n           let target = row.get('g') \n            if (!ids.has(target.properties.name)) {\n                let node = { \n                    id: target.identity,\n                    name: target.properties.name,\n                    nameType: 'Gene',\n                    nodeColor: graphScheme.geneNode, \n                    fontColor: graphScheme.geneFont,\n                    nodeVal: graphScheme.nodeVal,\n                    nodeRelSize: graphScheme.nodeRelSize,\n                    scaleFont: graphScheme.scaleFont\n                }\n                nodes.push(node) \n                link.target = node.name\n                ids.add(node.name)\n            } else {\n                link.target = target.properties.name\n            }\n            links.push(link)\n\n        })\n        console.log(nodes) \n        console.log(links) \n        console.log('Data loaded')\n        session.close();\n        console.log('nodes', nodes)\n        onData( {nodes, links} )\n    } catch (e) {\n        throw e\n    }\n    finally {\n        await session.close()\n\n    }\n}\n\nexport const  loadSyndromeOrganData = async (\n    driver: Driver | undefined,\n    verified: boolean,\n    syndromes: string[],\n    organs: string[],\n    graphScheme : GraphScheme,\n    onData:(data: Force2DData)=> void) => {\n    console.log('enter - loadData')\n    if (driver == null) {\n        console.log('Driver not loaded')\n        return \n    }\n\n    const str_organs = ArrayToStr(organs)\n    const str_syndrome = ArrayToStr(syndromes)\n\n    let whereCLAUSE = ''\n    \n    if ( verified ) {\n        whereCLAUSE = 'WHERE g.FinalVerdict = 1'\n    } else {\n        whereCLAUSE = 'WHERE g.FinalVerdict = 0'\n    }\n    console.log(organs, organs)\n    if ( str_organs !== '') {\n        whereCLAUSE = whereCLAUSE + ' AND o.name IN ' + str_organs\n    }\n    if ( str_syndrome !== '') {\n        whereCLAUSE = whereCLAUSE + ' AND s.name IN ' + str_syndrome\n    }\n\n    const query = `MATCH (g:MGene)-[r]->(s:Syndrome), (g:MGene)-[r2]->(o:Organ) ${whereCLAUSE} RETURN o,r2,s`\n\n    console.log('Syndrome->Gene', query)\n\n    let session = driver.session()\n\n    try {\n        let res = await session.run(query)\n        let ids = new  Set<string>()\n        let nodes : any[] = []\n        let links : any[] = []\n        res.records.forEach(row => {\n            let link  = { source: '', target: ''}\n            const target = row.get('o') \n            if (!ids.has(target.properties.name)) {\n                let node = { \n                    id: target.identity,\n                    name: target.properties.name,\n                    nodeType: 'Organ',\n                    nodeColor: graphScheme.organNode, \n                    fontColor: graphScheme.organFont,\n                    nodeVal: graphScheme.nodeVal,\n                    nodeRelSize: graphScheme.nodeRelSize,\n                    scaleFont: graphScheme.scaleFont\n                }\n                nodes.push(node) \n                link.target = node.name\n                ids.add(node.name)\n            } else {\n                link.target = target.properties.name\n            }\n        \n            const source = row.get('s') \n            if (!ids.has(source.properties.name)) {\n                let node = { \n                    id: source.identity,\n                    name: source.properties.name,\n                    nameType: 'Syndrome',\n                    nodeColor: graphScheme.syndromeNode,\n                    fontColor: graphScheme.syndromeFont,\n                    nodeVal: graphScheme.nodeVal,\n                    nodeRelSize: graphScheme.nodeRelSize,\n                    scaleFont: graphScheme.scaleFont\n                }\n                nodes.push(node) \n                link.source = node.name\n                ids.add(node.name)\n            } else {\n                link.source = source.properties.name\n            }\n\n            links.push(link)\n\n        })\n        console.log(nodes) \n        console.log(links) \n        console.log('Data loaded')\n        session.close();\n        console.log('nodes', nodes)\n        onData( {nodes, links} )\n    } catch (e) {\n        throw e\n    }\n    finally {\n        await session.close()\n\n    }\n}\n\nexport const  loadSyndromeGeneOrganData = async (\n    driver: Driver | undefined,\n    verified: boolean,\n    syndromes: string[],\n    genes: string[],\n    organs: string[],\n    graphScheme : GraphScheme,\n    onData:(data: Force2DData)=> void) => {\n    console.log('enter - loadData')\n    if (driver == null) {\n        console.log('Driver not loaded')\n        return \n    }\n\n    const str_syndromes = ArrayToStr(syndromes)\n    const str_genes = ArrayToStr(genes)\n    const str_organs = ArrayToStr(organs)\n\n    let whereCLAUSE = ''\n    \n    if ( verified ) {\n        whereCLAUSE = 'WHERE g.FinalVerdict = 1'\n    } else {\n        whereCLAUSE = 'WHERE g.FinalVerdict = 0'\n    }\n    console.log(organs, organs)\n    if ( str_organs !== '') {\n        whereCLAUSE = whereCLAUSE + ' AND o.name IN ' + str_organs\n    }\n    if ( str_syndromes !== '') {\n        whereCLAUSE = whereCLAUSE + ' AND s.name IN ' + str_syndromes\n    }\n    if ( str_genes !== '') {\n        whereCLAUSE = whereCLAUSE + ' AND g.name IN ' + str_genes\n    }\n\n    const query = \n        `MATCH (g:MGene)-[r]->(s:Syndrome), (g:MGene)-[r2]->(o:Organ) ${whereCLAUSE} RETURN g,o,s`\n\n    console.log('Syndrome->Gene-Organ', query)\n\n    let session = driver.session()\n\n    try {\n        let res = await session.run(query)\n        let ids = new  Set<string>()\n        let nodes : any[] = []\n        let links : any[] = []\n        res.records.forEach(row => {\n            let link1  = { source: '', target: ''}\n            let source = row.get('s') \n            if (!ids.has(source.properties.name)) {\n                let node = { \n                    id: source.identity,\n                    name: source.properties.name,\n                    nodeColor: graphScheme.syndromeNode,\n                    fontColor: graphScheme.syndromeFont,\n                    nodeVal: graphScheme.nodeVal,\n                    nodeRelSize: graphScheme.nodeRelSize,\n                    scaleFont: graphScheme.scaleFont\n                }\n                nodes.push(node) \n                link1.source = node.name\n                ids.add(node.name)\n            } else {\n                link1.source = source.properties.name\n            }\n\n            let target = row.get('g') \n            if (!ids.has(target.properties.name)) {\n                let node = { \n                    id: target.identity,\n                    name: target.properties.name,\n                    nodeColor: graphScheme.geneNode, \n                    fontColor: graphScheme.geneFont,\n                    nodeVal: graphScheme.nodeVal,\n                    nodeRelSize: graphScheme.nodeRelSize,\n                    scaleFont: graphScheme.scaleFont\n                }\n                nodes.push(node) \n                link1.target = node.name\n                ids.add(node.name)\n            } else {\n                link1.target = target.properties.name\n            }\n            links.push(link1)\n            // Do not push duplicate links\n            console.log(\"link\",link1)\n            let link2 = { source: '', target: ''}\n\n            link2.source = link1.target\n            target = row.get('o') \n            if (!ids.has(target.properties.name)) {\n                let node = { \n                    id: target.identity,\n                    name: target.properties.name,\n                    nodeColor: graphScheme.organNode,\n                    fontColor: graphScheme.organFont,\n                    nodeVal: graphScheme.nodeVal,\n                    nodeRelSize: graphScheme.nodeRelSize,\n                    scaleFont: graphScheme.scaleFont\n                }\n                nodes.push(node) \n                link2.target = node.name\n                ids.add(node.name)\n            } else {\n                link2.target = target.properties.name\n            }\n\n            links.push(link2)\n\n        })\n        console.log(nodes) \n        console.log(links) \n        console.log('Data loaded')\n        session.close();\n        console.log('nodes', nodes)\n        onData( {nodes, links} )\n    } catch (e) {\n        throw e\n    }\n    finally {\n        await session.close()\n\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}