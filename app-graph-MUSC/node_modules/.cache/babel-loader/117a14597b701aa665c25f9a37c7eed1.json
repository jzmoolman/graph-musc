{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _rxjs = require(\"rxjs\");\n\nvar _resultRx = _interopRequireDefault(require(\"./result-rx\"));\n\nvar _neo4jDriverCore = _interopRequireDefault(require(\"neo4j-driver-core\"));\n/**\n * Copyright (c) \"Neo4j\"\n * Neo4j Sweden AB [http://neo4j.com]\n *\n * This file is part of Neo4j.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * A reactive transaction, which provides the same functionality as {@link Transaction} but through a Reactive API.\n */\n\n\nvar RxTransaction = /*#__PURE__*/function () {\n  /**\n   * @constructor\n   * @protected\n   * @param {Transaction} txc - The underlying transaction instance to relay requests\n   */\n  function RxTransaction(txc) {\n    (0, _classCallCheck2[\"default\"])(this, RxTransaction);\n    this._txc = txc;\n  }\n  /**\n   * Creates a reactive result that will execute the query in this transaction, with the provided parameters.\n   *\n   * @public\n   * @param {string} query - Query to be executed.\n   * @param {Object} parameters - Parameter values to use in query execution.\n   * @returns {RxResult} - A reactive result\n   */\n\n\n  (0, _createClass2[\"default\"])(RxTransaction, [{\n    key: \"run\",\n    value: function run(query, parameters) {\n      var _this = this;\n\n      return new _resultRx[\"default\"](new _rxjs.Observable(function (observer) {\n        try {\n          observer.next(_this._txc.run(query, parameters));\n          observer.complete();\n        } catch (err) {\n          observer.error(err);\n        }\n\n        return function () {};\n      }));\n    }\n    /**\n     *  Commits the transaction.\n     *\n     * @public\n     * @returns {Observable} - An empty observable\n     */\n\n  }, {\n    key: \"commit\",\n    value: function commit() {\n      var _this2 = this;\n\n      return new _rxjs.Observable(function (observer) {\n        _this2._txc.commit().then(function () {\n          observer.complete();\n        })[\"catch\"](function (err) {\n          return observer.error(err);\n        });\n      });\n    }\n    /**\n     *  Rolls back the transaction.\n     *\n     * @public\n     * @returns {Observable} - An empty observable\n     */\n\n  }, {\n    key: \"rollback\",\n    value: function rollback() {\n      var _this3 = this;\n\n      return new _rxjs.Observable(function (observer) {\n        _this3._txc.rollback().then(function () {\n          observer.complete();\n        })[\"catch\"](function (err) {\n          return observer.error(err);\n        });\n      });\n    }\n    /**\n     * Closes the transaction\n     *\n     * This method will roll back the transaction if it is not already committed or rolled back.\n     *\n     * @returns {Observable} - An empty observable\n     */\n\n  }, {\n    key: \"close\",\n    value: function close() {\n      var _this4 = this;\n\n      return new _rxjs.Observable(function (observer) {\n        _this4._txc.close().then(function () {\n          observer.complete();\n        })[\"catch\"](function (err) {\n          return observer.error(err);\n        });\n      });\n    }\n  }]);\n  return RxTransaction;\n}();\n\nexports[\"default\"] = RxTransaction;","map":{"version":3,"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","_classCallCheck2","_createClass2","_rxjs","_resultRx","_neo4jDriverCore","RxTransaction","txc","_txc","key","run","query","parameters","_this","Observable","observer","next","complete","err","error","commit","_this2","then","rollback","_this3","close","_this4"],"sources":["/Users/zack/src/gene3/node_modules/neo4j-driver/lib/transaction-rx.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _rxjs = require(\"rxjs\");\n\nvar _resultRx = _interopRequireDefault(require(\"./result-rx\"));\n\nvar _neo4jDriverCore = _interopRequireDefault(require(\"neo4j-driver-core\"));\n\n/**\n * Copyright (c) \"Neo4j\"\n * Neo4j Sweden AB [http://neo4j.com]\n *\n * This file is part of Neo4j.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * A reactive transaction, which provides the same functionality as {@link Transaction} but through a Reactive API.\n */\nvar RxTransaction = /*#__PURE__*/function () {\n  /**\n   * @constructor\n   * @protected\n   * @param {Transaction} txc - The underlying transaction instance to relay requests\n   */\n  function RxTransaction(txc) {\n    (0, _classCallCheck2[\"default\"])(this, RxTransaction);\n    this._txc = txc;\n  }\n  /**\n   * Creates a reactive result that will execute the query in this transaction, with the provided parameters.\n   *\n   * @public\n   * @param {string} query - Query to be executed.\n   * @param {Object} parameters - Parameter values to use in query execution.\n   * @returns {RxResult} - A reactive result\n   */\n\n\n  (0, _createClass2[\"default\"])(RxTransaction, [{\n    key: \"run\",\n    value: function run(query, parameters) {\n      var _this = this;\n\n      return new _resultRx[\"default\"](new _rxjs.Observable(function (observer) {\n        try {\n          observer.next(_this._txc.run(query, parameters));\n          observer.complete();\n        } catch (err) {\n          observer.error(err);\n        }\n\n        return function () {};\n      }));\n    }\n    /**\n     *  Commits the transaction.\n     *\n     * @public\n     * @returns {Observable} - An empty observable\n     */\n\n  }, {\n    key: \"commit\",\n    value: function commit() {\n      var _this2 = this;\n\n      return new _rxjs.Observable(function (observer) {\n        _this2._txc.commit().then(function () {\n          observer.complete();\n        })[\"catch\"](function (err) {\n          return observer.error(err);\n        });\n      });\n    }\n    /**\n     *  Rolls back the transaction.\n     *\n     * @public\n     * @returns {Observable} - An empty observable\n     */\n\n  }, {\n    key: \"rollback\",\n    value: function rollback() {\n      var _this3 = this;\n\n      return new _rxjs.Observable(function (observer) {\n        _this3._txc.rollback().then(function () {\n          observer.complete();\n        })[\"catch\"](function (err) {\n          return observer.error(err);\n        });\n      });\n    }\n    /**\n     * Closes the transaction\n     *\n     * This method will roll back the transaction if it is not already committed or rolled back.\n     *\n     * @returns {Observable} - An empty observable\n     */\n\n  }, {\n    key: \"close\",\n    value: function close() {\n      var _this4 = this;\n\n      return new _rxjs.Observable(function (observer) {\n        _this4._txc.close().then(function () {\n          observer.complete();\n        })[\"catch\"](function (err) {\n          return observer.error(err);\n        });\n      });\n    }\n  }]);\n  return RxTransaction;\n}();\n\nexports[\"default\"] = RxTransaction;"],"mappings":"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"},"metadata":{},"sourceType":"script"}