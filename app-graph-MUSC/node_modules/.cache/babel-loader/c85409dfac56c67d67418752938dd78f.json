{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useDatabases = exports.useSchema = void 0;\n\nvar react_1 = require(\"react\");\n\nvar cypher_1 = require(\"./cypher\");\n\nfunction toPropertySchema(properties) {\n  var ordered = Object.entries(properties).sort(function (_a, _b) {\n    var a = _a[0];\n    var b = _b[0];\n    return a < b ? -1 : 1;\n  }).map(function (_a) {\n    var key = _a[0],\n        value = _a[1];\n    return [key, value];\n  });\n  return Object.fromEntries(ordered);\n}\n\nfunction toLabelSchema(label, input) {\n  return __assign(__assign({}, input), {\n    label: label,\n    relationships: Object.entries(input.relationships).map(function (_a) {\n      var key = _a[0],\n          value = _a[1];\n      return toRelationshipTypeSchema(key, value);\n    }).sort(function (a, b) {\n      return a.type < b.type ? -1 : 1;\n    }),\n    properties: toPropertySchema(input.properties),\n    count: input === null || input === void 0 ? void 0 : input.count.toNumber()\n  });\n}\n\nfunction toRelationshipTypeSchema(type, input) {\n  var _a;\n\n  return __assign(__assign({}, input), {\n    type: type,\n    count: (_a = input.count) === null || _a === void 0 ? void 0 : _a.toNumber(),\n    properties: toPropertySchema(input.properties)\n  });\n}\n\nfunction useSchema(specificDatabase) {\n  var _a = cypher_1.useReadCypher('call apoc.meta.schema', {}, specificDatabase),\n      loading = _a.loading,\n      error = _a.error,\n      first = _a.first,\n      database = _a.database;\n\n  var _b = react_1.useState([]),\n      labels = _b[0],\n      setLabels = _b[1];\n\n  var _c = react_1.useState([]),\n      types = _c[0],\n      setTypes = _c[1];\n\n  react_1.useEffect(function () {\n    if (first) {\n      setLabels(Object.entries(first.get('value')).filter(function (_a) {\n        var key = _a[0],\n            value = _a[1];\n        return value.type === 'node';\n      }).map(function (_a) {\n        var key = _a[0],\n            value = _a[1];\n        return toLabelSchema(key, value);\n      }).sort(function (a, b) {\n        return a.label < b.label ? -1 : 1;\n      }));\n      setTypes(Object.entries(first.get('value')).filter(function (_a) {\n        var key = _a[0],\n            value = _a[1];\n        return value.type === 'relationship';\n      }).map(function (_a) {\n        var key = _a[0],\n            value = _a[1];\n        return toRelationshipTypeSchema(key, value);\n      }).sort(function (a, b) {\n        return a.type < b.type ? -1 : 1;\n      }));\n    }\n  }, [first]);\n  return {\n    loading: loading,\n    error: error,\n    database: database,\n    labels: labels,\n    types: types\n  };\n}\n\nexports.useSchema = useSchema;\n\nfunction useDatabases() {\n  var _a = cypher_1.useReadCypher('SHOW DATABASES', {}, 'system'),\n      loading = _a.loading,\n      error = _a.error,\n      records = _a.records;\n\n  var databases = records === null || records === void 0 ? void 0 : records.map(function (row) {\n    return {\n      name: row.get('name'),\n      address: row.get('address'),\n      role: row.get('role'),\n      requestedStatus: row.get('requestedStatus'),\n      currentStatus: row.get('currentStatus'),\n      error: row.get('error'),\n      default: row.get('default')\n    };\n  });\n  return {\n    loading: loading,\n    error: error,\n    databases: databases\n  };\n}\n\nexports.useDatabases = useDatabases;","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","defineProperty","exports","value","useDatabases","useSchema","react_1","require","cypher_1","toPropertySchema","properties","ordered","entries","sort","_a","_b","a","b","map","key","fromEntries","toLabelSchema","label","input","relationships","toRelationshipTypeSchema","type","count","toNumber","specificDatabase","useReadCypher","loading","error","first","database","useState","labels","setLabels","_c","types","setTypes","useEffect","get","filter","records","databases","row","name","address","role","requestedStatus","currentStatus","default"],"sources":["/Users/zack/src/gene3/node_modules/use-neo4j/dist/schema.js"],"sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useDatabases = exports.useSchema = void 0;\nvar react_1 = require(\"react\");\nvar cypher_1 = require(\"./cypher\");\nfunction toPropertySchema(properties) {\n    var ordered = Object.entries(properties)\n        .sort(function (_a, _b) {\n        var a = _a[0];\n        var b = _b[0];\n        return a < b ? -1 : 1;\n    })\n        .map(function (_a) {\n        var key = _a[0], value = _a[1];\n        return [key, value];\n    });\n    return Object.fromEntries(ordered);\n}\nfunction toLabelSchema(label, input) {\n    return __assign(__assign({}, input), { label: label, relationships: Object.entries(input.relationships)\n            .map(function (_a) {\n            var key = _a[0], value = _a[1];\n            return toRelationshipTypeSchema(key, value);\n        })\n            .sort(function (a, b) { return a.type < b.type ? -1 : 1; }), properties: toPropertySchema(input.properties), count: input === null || input === void 0 ? void 0 : input.count.toNumber() });\n}\nfunction toRelationshipTypeSchema(type, input) {\n    var _a;\n    return __assign(__assign({}, input), { type: type, count: (_a = input.count) === null || _a === void 0 ? void 0 : _a.toNumber(), properties: toPropertySchema(input.properties) });\n}\nfunction useSchema(specificDatabase) {\n    var _a = cypher_1.useReadCypher('call apoc.meta.schema', {}, specificDatabase), loading = _a.loading, error = _a.error, first = _a.first, database = _a.database;\n    var _b = react_1.useState([]), labels = _b[0], setLabels = _b[1];\n    var _c = react_1.useState([]), types = _c[0], setTypes = _c[1];\n    react_1.useEffect(function () {\n        if (first) {\n            setLabels(Object.entries(first.get('value'))\n                .filter(function (_a) {\n                var key = _a[0], value = _a[1];\n                return value.type === 'node';\n            })\n                .map(function (_a) {\n                var key = _a[0], value = _a[1];\n                return toLabelSchema(key, value);\n            })\n                .sort(function (a, b) { return a.label < b.label ? -1 : 1; }));\n            setTypes(Object.entries(first.get('value'))\n                .filter(function (_a) {\n                var key = _a[0], value = _a[1];\n                return value.type === 'relationship';\n            })\n                .map(function (_a) {\n                var key = _a[0], value = _a[1];\n                return toRelationshipTypeSchema(key, value);\n            })\n                .sort(function (a, b) { return a.type < b.type ? -1 : 1; }));\n        }\n    }, [first]);\n    return {\n        loading: loading,\n        error: error,\n        database: database,\n        labels: labels,\n        types: types,\n    };\n}\nexports.useSchema = useSchema;\nfunction useDatabases() {\n    var _a = cypher_1.useReadCypher('SHOW DATABASES', {}, 'system'), loading = _a.loading, error = _a.error, records = _a.records;\n    var databases = records === null || records === void 0 ? void 0 : records.map(function (row) { return ({\n        name: row.get('name'),\n        address: row.get('address'),\n        role: row.get('role'),\n        requestedStatus: row.get('requestedStatus'),\n        currentStatus: row.get('currentStatus'),\n        error: row.get('error'),\n        default: row.get('default'),\n    }); });\n    return {\n        loading: loading,\n        error: error,\n        databases: databases,\n    };\n}\nexports.useDatabases = useDatabases;\n"],"mappings":"AAAA;;AACA,IAAIA,QAAQ,GAAI,QAAQ,KAAKA,QAAd,IAA2B,YAAY;EAClDA,QAAQ,GAAGC,MAAM,CAACC,MAAP,IAAiB,UAASC,CAAT,EAAY;IACpC,KAAK,IAAIC,CAAJ,EAAOC,CAAC,GAAG,CAAX,EAAcC,CAAC,GAAGC,SAAS,CAACC,MAAjC,EAAyCH,CAAC,GAAGC,CAA7C,EAAgDD,CAAC,EAAjD,EAAqD;MACjDD,CAAC,GAAGG,SAAS,CAACF,CAAD,CAAb;;MACA,KAAK,IAAII,CAAT,IAAcL,CAAd,EAAiB,IAAIH,MAAM,CAACS,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCR,CAArC,EAAwCK,CAAxC,CAAJ,EACbN,CAAC,CAACM,CAAD,CAAD,GAAOL,CAAC,CAACK,CAAD,CAAR;IACP;;IACD,OAAON,CAAP;EACH,CAPD;;EAQA,OAAOH,QAAQ,CAACa,KAAT,CAAe,IAAf,EAAqBN,SAArB,CAAP;AACH,CAVD;;AAWAN,MAAM,CAACa,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAAEC,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,YAAR,GAAuBF,OAAO,CAACG,SAAR,GAAoB,KAAK,CAAhD;;AACA,IAAIC,OAAO,GAAGC,OAAO,CAAC,OAAD,CAArB;;AACA,IAAIC,QAAQ,GAAGD,OAAO,CAAC,UAAD,CAAtB;;AACA,SAASE,gBAAT,CAA0BC,UAA1B,EAAsC;EAClC,IAAIC,OAAO,GAAGvB,MAAM,CAACwB,OAAP,CAAeF,UAAf,EACTG,IADS,CACJ,UAAUC,EAAV,EAAcC,EAAd,EAAkB;IACxB,IAAIC,CAAC,GAAGF,EAAE,CAAC,CAAD,CAAV;IACA,IAAIG,CAAC,GAAGF,EAAE,CAAC,CAAD,CAAV;IACA,OAAOC,CAAC,GAAGC,CAAJ,GAAQ,CAAC,CAAT,GAAa,CAApB;EACH,CALa,EAMTC,GANS,CAML,UAAUJ,EAAV,EAAc;IACnB,IAAIK,GAAG,GAAGL,EAAE,CAAC,CAAD,CAAZ;IAAA,IAAiBX,KAAK,GAAGW,EAAE,CAAC,CAAD,CAA3B;IACA,OAAO,CAACK,GAAD,EAAMhB,KAAN,CAAP;EACH,CATa,CAAd;EAUA,OAAOf,MAAM,CAACgC,WAAP,CAAmBT,OAAnB,CAAP;AACH;;AACD,SAASU,aAAT,CAAuBC,KAAvB,EAA8BC,KAA9B,EAAqC;EACjC,OAAOpC,QAAQ,CAACA,QAAQ,CAAC,EAAD,EAAKoC,KAAL,CAAT,EAAsB;IAAED,KAAK,EAAEA,KAAT;IAAgBE,aAAa,EAAEpC,MAAM,CAACwB,OAAP,CAAeW,KAAK,CAACC,aAArB,EAC3DN,GAD2D,CACvD,UAAUJ,EAAV,EAAc;MACnB,IAAIK,GAAG,GAAGL,EAAE,CAAC,CAAD,CAAZ;MAAA,IAAiBX,KAAK,GAAGW,EAAE,CAAC,CAAD,CAA3B;MACA,OAAOW,wBAAwB,CAACN,GAAD,EAAMhB,KAAN,CAA/B;IACH,CAJ+D,EAK3DU,IAL2D,CAKtD,UAAUG,CAAV,EAAaC,CAAb,EAAgB;MAAE,OAAOD,CAAC,CAACU,IAAF,GAAST,CAAC,CAACS,IAAX,GAAkB,CAAC,CAAnB,GAAuB,CAA9B;IAAkC,CALE,CAA/B;IAKgChB,UAAU,EAAED,gBAAgB,CAACc,KAAK,CAACb,UAAP,CAL5D;IAKgFiB,KAAK,EAAEJ,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAACI,KAAN,CAAYC,QAAZ;EALrI,CAAtB,CAAf;AAMH;;AACD,SAASH,wBAAT,CAAkCC,IAAlC,EAAwCH,KAAxC,EAA+C;EAC3C,IAAIT,EAAJ;;EACA,OAAO3B,QAAQ,CAACA,QAAQ,CAAC,EAAD,EAAKoC,KAAL,CAAT,EAAsB;IAAEG,IAAI,EAAEA,IAAR;IAAcC,KAAK,EAAE,CAACb,EAAE,GAAGS,KAAK,CAACI,KAAZ,MAAuB,IAAvB,IAA+Bb,EAAE,KAAK,KAAK,CAA3C,GAA+C,KAAK,CAApD,GAAwDA,EAAE,CAACc,QAAH,EAA7E;IAA4FlB,UAAU,EAAED,gBAAgB,CAACc,KAAK,CAACb,UAAP;EAAxH,CAAtB,CAAf;AACH;;AACD,SAASL,SAAT,CAAmBwB,gBAAnB,EAAqC;EACjC,IAAIf,EAAE,GAAGN,QAAQ,CAACsB,aAAT,CAAuB,uBAAvB,EAAgD,EAAhD,EAAoDD,gBAApD,CAAT;EAAA,IAAgFE,OAAO,GAAGjB,EAAE,CAACiB,OAA7F;EAAA,IAAsGC,KAAK,GAAGlB,EAAE,CAACkB,KAAjH;EAAA,IAAwHC,KAAK,GAAGnB,EAAE,CAACmB,KAAnI;EAAA,IAA0IC,QAAQ,GAAGpB,EAAE,CAACoB,QAAxJ;;EACA,IAAInB,EAAE,GAAGT,OAAO,CAAC6B,QAAR,CAAiB,EAAjB,CAAT;EAAA,IAA+BC,MAAM,GAAGrB,EAAE,CAAC,CAAD,CAA1C;EAAA,IAA+CsB,SAAS,GAAGtB,EAAE,CAAC,CAAD,CAA7D;;EACA,IAAIuB,EAAE,GAAGhC,OAAO,CAAC6B,QAAR,CAAiB,EAAjB,CAAT;EAAA,IAA+BI,KAAK,GAAGD,EAAE,CAAC,CAAD,CAAzC;EAAA,IAA8CE,QAAQ,GAAGF,EAAE,CAAC,CAAD,CAA3D;;EACAhC,OAAO,CAACmC,SAAR,CAAkB,YAAY;IAC1B,IAAIR,KAAJ,EAAW;MACPI,SAAS,CAACjD,MAAM,CAACwB,OAAP,CAAeqB,KAAK,CAACS,GAAN,CAAU,OAAV,CAAf,EACLC,MADK,CACE,UAAU7B,EAAV,EAAc;QACtB,IAAIK,GAAG,GAAGL,EAAE,CAAC,CAAD,CAAZ;QAAA,IAAiBX,KAAK,GAAGW,EAAE,CAAC,CAAD,CAA3B;QACA,OAAOX,KAAK,CAACuB,IAAN,KAAe,MAAtB;MACH,CAJS,EAKLR,GALK,CAKD,UAAUJ,EAAV,EAAc;QACnB,IAAIK,GAAG,GAAGL,EAAE,CAAC,CAAD,CAAZ;QAAA,IAAiBX,KAAK,GAAGW,EAAE,CAAC,CAAD,CAA3B;QACA,OAAOO,aAAa,CAACF,GAAD,EAAMhB,KAAN,CAApB;MACH,CARS,EASLU,IATK,CASA,UAAUG,CAAV,EAAaC,CAAb,EAAgB;QAAE,OAAOD,CAAC,CAACM,KAAF,GAAUL,CAAC,CAACK,KAAZ,GAAoB,CAAC,CAArB,GAAyB,CAAhC;MAAoC,CATtD,CAAD,CAAT;MAUAkB,QAAQ,CAACpD,MAAM,CAACwB,OAAP,CAAeqB,KAAK,CAACS,GAAN,CAAU,OAAV,CAAf,EACJC,MADI,CACG,UAAU7B,EAAV,EAAc;QACtB,IAAIK,GAAG,GAAGL,EAAE,CAAC,CAAD,CAAZ;QAAA,IAAiBX,KAAK,GAAGW,EAAE,CAAC,CAAD,CAA3B;QACA,OAAOX,KAAK,CAACuB,IAAN,KAAe,cAAtB;MACH,CAJQ,EAKJR,GALI,CAKA,UAAUJ,EAAV,EAAc;QACnB,IAAIK,GAAG,GAAGL,EAAE,CAAC,CAAD,CAAZ;QAAA,IAAiBX,KAAK,GAAGW,EAAE,CAAC,CAAD,CAA3B;QACA,OAAOW,wBAAwB,CAACN,GAAD,EAAMhB,KAAN,CAA/B;MACH,CARQ,EASJU,IATI,CASC,UAAUG,CAAV,EAAaC,CAAb,EAAgB;QAAE,OAAOD,CAAC,CAACU,IAAF,GAAST,CAAC,CAACS,IAAX,GAAkB,CAAC,CAAnB,GAAuB,CAA9B;MAAkC,CATrD,CAAD,CAAR;IAUH;EACJ,CAvBD,EAuBG,CAACO,KAAD,CAvBH;EAwBA,OAAO;IACHF,OAAO,EAAEA,OADN;IAEHC,KAAK,EAAEA,KAFJ;IAGHE,QAAQ,EAAEA,QAHP;IAIHE,MAAM,EAAEA,MAJL;IAKHG,KAAK,EAAEA;EALJ,CAAP;AAOH;;AACDrC,OAAO,CAACG,SAAR,GAAoBA,SAApB;;AACA,SAASD,YAAT,GAAwB;EACpB,IAAIU,EAAE,GAAGN,QAAQ,CAACsB,aAAT,CAAuB,gBAAvB,EAAyC,EAAzC,EAA6C,QAA7C,CAAT;EAAA,IAAiEC,OAAO,GAAGjB,EAAE,CAACiB,OAA9E;EAAA,IAAuFC,KAAK,GAAGlB,EAAE,CAACkB,KAAlG;EAAA,IAAyGY,OAAO,GAAG9B,EAAE,CAAC8B,OAAtH;;EACA,IAAIC,SAAS,GAAGD,OAAO,KAAK,IAAZ,IAAoBA,OAAO,KAAK,KAAK,CAArC,GAAyC,KAAK,CAA9C,GAAkDA,OAAO,CAAC1B,GAAR,CAAY,UAAU4B,GAAV,EAAe;IAAE,OAAQ;MACnGC,IAAI,EAAED,GAAG,CAACJ,GAAJ,CAAQ,MAAR,CAD6F;MAEnGM,OAAO,EAAEF,GAAG,CAACJ,GAAJ,CAAQ,SAAR,CAF0F;MAGnGO,IAAI,EAAEH,GAAG,CAACJ,GAAJ,CAAQ,MAAR,CAH6F;MAInGQ,eAAe,EAAEJ,GAAG,CAACJ,GAAJ,CAAQ,iBAAR,CAJkF;MAKnGS,aAAa,EAAEL,GAAG,CAACJ,GAAJ,CAAQ,eAAR,CALoF;MAMnGV,KAAK,EAAEc,GAAG,CAACJ,GAAJ,CAAQ,OAAR,CAN4F;MAOnGU,OAAO,EAAEN,GAAG,CAACJ,GAAJ,CAAQ,SAAR;IAP0F,CAAR;EAQ1F,CAR6D,CAAlE;EASA,OAAO;IACHX,OAAO,EAAEA,OADN;IAEHC,KAAK,EAAEA,KAFJ;IAGHa,SAAS,EAAEA;EAHR,CAAP;AAKH;;AACD3C,OAAO,CAACE,YAAR,GAAuBA,YAAvB"},"metadata":{},"sourceType":"script"}