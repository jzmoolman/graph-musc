{"ast":null,"code":"\"use strict\";\n/**\n * Copyright (c) \"Neo4j\"\n * Neo4j Sweden AB [http://neo4j.com]\n *\n * This file is part of Neo4j.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar channel_buf_1 = __importDefault(require(\"./channel-buf\"));\n\nvar neo4j_driver_core_1 = require(\"neo4j-driver-core\");\n\nvar buffer_1 = __importDefault(require(\"buffer\"));\n\nvar string_decoder_1 = require(\"string_decoder\");\n\nvar decoder = new string_decoder_1.StringDecoder('utf8');\n\nfunction encode(str) {\n  return new channel_buf_1.default(newBuffer(str));\n}\n\nfunction decode(buffer, length) {\n  if (Object.prototype.hasOwnProperty.call(buffer, '_buffer')) {\n    return decodeChannelBuffer(buffer, length);\n  } else if (Object.prototype.hasOwnProperty.call(buffer, '_buffers')) {\n    return decodeCombinedBuffer(buffer, length);\n  } else {\n    throw (0, neo4j_driver_core_1.newError)(\"Don't know how to decode strings from '\" + buffer + \"'\");\n  }\n}\n\nfunction decodeChannelBuffer(buffer, length) {\n  var start = buffer.position;\n  var end = start + length;\n  buffer.position = Math.min(end, buffer.length);\n  return buffer._buffer.toString('utf8', start, end);\n}\n\nfunction decodeCombinedBuffer(buffer, length) {\n  return streamDecodeCombinedBuffer(buffer, length, function (partBuffer) {\n    return decoder.write(partBuffer._buffer);\n  }, function () {\n    return decoder.end();\n  });\n}\n\nfunction streamDecodeCombinedBuffer(combinedBuffers, length, decodeFn, endFn) {\n  var remainingBytesToRead = length;\n  var position = combinedBuffers.position;\n\n  combinedBuffers._updatePos(Math.min(length, combinedBuffers.length - position)); // Reduce CombinedBuffers to a decoded string\n\n\n  var out = combinedBuffers._buffers.reduce(function (last, partBuffer) {\n    if (remainingBytesToRead <= 0) {\n      return last;\n    } else if (position >= partBuffer.length) {\n      position -= partBuffer.length;\n      return '';\n    } else {\n      partBuffer._updatePos(position - partBuffer.position);\n\n      var bytesToRead = Math.min(partBuffer.length - position, remainingBytesToRead);\n      var lastSlice = partBuffer.readSlice(bytesToRead);\n\n      partBuffer._updatePos(bytesToRead);\n\n      remainingBytesToRead = Math.max(remainingBytesToRead - lastSlice.length, 0);\n      position = 0;\n      return last + decodeFn(lastSlice);\n    }\n  }, '');\n\n  return out + endFn();\n}\n\nfunction newBuffer(str) {\n  // use static factory function present in newer NodeJS versions to create a buffer containing the given string\n  // or fallback to the old, potentially deprecated constructor\n  if (typeof buffer_1.default.Buffer.from === 'function') {\n    return buffer_1.default.Buffer.from(str, 'utf8');\n  } else {\n    // eslint-disable-next-line node/no-deprecated-api\n    return new buffer_1.default.Buffer(str, 'utf8');\n  }\n}\n\nexports.default = {\n  encode: encode,\n  decode: decode\n};","map":{"version":3,"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","channel_buf_1","require","neo4j_driver_core_1","buffer_1","string_decoder_1","decoder","StringDecoder","encode","str","default","newBuffer","decode","buffer","length","prototype","hasOwnProperty","call","decodeChannelBuffer","decodeCombinedBuffer","newError","start","position","end","Math","min","_buffer","toString","streamDecodeCombinedBuffer","partBuffer","write","combinedBuffers","decodeFn","endFn","remainingBytesToRead","_updatePos","out","_buffers","reduce","last","bytesToRead","lastSlice","readSlice","max","Buffer","from"],"sources":["/Users/zack/src/_-MUSC/gene-graph-MUSC/node_modules/neo4j-driver-bolt-connection/lib/channel/utf8.js"],"sourcesContent":["\"use strict\";\n/**\n * Copyright (c) \"Neo4j\"\n * Neo4j Sweden AB [http://neo4j.com]\n *\n * This file is part of Neo4j.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar channel_buf_1 = __importDefault(require(\"./channel-buf\"));\nvar neo4j_driver_core_1 = require(\"neo4j-driver-core\");\nvar buffer_1 = __importDefault(require(\"buffer\"));\nvar string_decoder_1 = require(\"string_decoder\");\nvar decoder = new string_decoder_1.StringDecoder('utf8');\nfunction encode(str) {\n    return new channel_buf_1.default(newBuffer(str));\n}\nfunction decode(buffer, length) {\n    if (Object.prototype.hasOwnProperty.call(buffer, '_buffer')) {\n        return decodeChannelBuffer(buffer, length);\n    }\n    else if (Object.prototype.hasOwnProperty.call(buffer, '_buffers')) {\n        return decodeCombinedBuffer(buffer, length);\n    }\n    else {\n        throw (0, neo4j_driver_core_1.newError)(\"Don't know how to decode strings from '\" + buffer + \"'\");\n    }\n}\nfunction decodeChannelBuffer(buffer, length) {\n    var start = buffer.position;\n    var end = start + length;\n    buffer.position = Math.min(end, buffer.length);\n    return buffer._buffer.toString('utf8', start, end);\n}\nfunction decodeCombinedBuffer(buffer, length) {\n    return streamDecodeCombinedBuffer(buffer, length, function (partBuffer) { return decoder.write(partBuffer._buffer); }, function () { return decoder.end(); });\n}\nfunction streamDecodeCombinedBuffer(combinedBuffers, length, decodeFn, endFn) {\n    var remainingBytesToRead = length;\n    var position = combinedBuffers.position;\n    combinedBuffers._updatePos(Math.min(length, combinedBuffers.length - position));\n    // Reduce CombinedBuffers to a decoded string\n    var out = combinedBuffers._buffers.reduce(function (last, partBuffer) {\n        if (remainingBytesToRead <= 0) {\n            return last;\n        }\n        else if (position >= partBuffer.length) {\n            position -= partBuffer.length;\n            return '';\n        }\n        else {\n            partBuffer._updatePos(position - partBuffer.position);\n            var bytesToRead = Math.min(partBuffer.length - position, remainingBytesToRead);\n            var lastSlice = partBuffer.readSlice(bytesToRead);\n            partBuffer._updatePos(bytesToRead);\n            remainingBytesToRead = Math.max(remainingBytesToRead - lastSlice.length, 0);\n            position = 0;\n            return last + decodeFn(lastSlice);\n        }\n    }, '');\n    return out + endFn();\n}\nfunction newBuffer(str) {\n    // use static factory function present in newer NodeJS versions to create a buffer containing the given string\n    // or fallback to the old, potentially deprecated constructor\n    if (typeof buffer_1.default.Buffer.from === 'function') {\n        return buffer_1.default.Buffer.from(str, 'utf8');\n    }\n    else {\n        // eslint-disable-next-line node/no-deprecated-api\n        return new buffer_1.default.Buffer(str, 'utf8');\n    }\n}\nexports.default = {\n    encode: encode,\n    decode: decode\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}