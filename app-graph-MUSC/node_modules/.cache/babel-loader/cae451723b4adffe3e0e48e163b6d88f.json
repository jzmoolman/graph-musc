{"ast":null,"code":"import { ArrayToStr } from './graphtools';\n\nconst getFinalVerdictClause = finalVerdict => {\n  let whereClause = '';\n\n  if (finalVerdict === 'Confirmed') {\n    whereClause = 'WHERE g.FinalVerdict = 1';\n  } else if (finalVerdict === 'Maybe') {\n    whereClause = 'WHERE g.FinalVerdict = 9';\n  } else {\n    whereClause = 'WHERE g.FinalVerdict in [0,1,9]';\n  }\n\n  return whereClause;\n};\n\nexport const loadGene = async (driver, onData) => {\n  if (driver == null) {\n    console.log('Driver not loaded');\n    return;\n  }\n\n  const query = `MATCH (g:MGene) RETURN DISTINCT g.name as name ORDER BY name`;\n  let session = driver.session();\n\n  try {\n    let res = await session.run(query);\n    let ids = new Set();\n    let nodes = [];\n    let links = [];\n    res.records.foreach(row => {\n      let link = {\n        source: '',\n        target: ''\n      };\n      const source = row.get('g');\n\n      if (!ids.has(source.properties.name)) {\n        let node = {\n          id: source.identity,\n          name: source.properties.name,\n          nodetype: 'gene',\n          nodecolor: graphscheme.genenode,\n          fontcolor: graphscheme.genefont,\n          nodeval: graphscheme.nodeval,\n          noderelsize: graphscheme.noderelsize,\n          scalefont: graphscheme.scalefont\n        };\n        nodes.push(node);\n        link.source = node.name;\n        ids.add(node.name);\n      } else {\n        link.source = source.properties.name;\n      }\n\n      const target = row.get('o');\n\n      if (!ids.has(target.properties.name)) {\n        let node = {\n          id: target.identity,\n          name: target.properties.name,\n          nodetype: 'organ',\n          nodecolor: graphscheme.organnode,\n          fontcolor: graphscheme.organfont,\n          nodeval: graphscheme.nodeval,\n          noderelsize: graphscheme.noderelsize,\n          scalefont: graphscheme.scalefont\n        };\n        nodes.push(node);\n        link.target = node.name;\n        ids.add(node.name);\n      } else {\n        link.target = target.properties.name;\n      }\n\n      links.push(link);\n    }); // console.log(nodes) \n    // console.log(links) \n    // console.log('data loaded')\n\n    session.close();\n    ondata({\n      nodes,\n      links\n    });\n  } catch (e) {\n    throw e;\n  } finally {\n    await session.close();\n  }\n};\nexport const loadGeneData = async (driver, genes, organs, finalVerdict, graphScheme, onData) => {\n  // console.log('enter - loadData')\n  if (driver == null) {\n    console.log('Driver not loaded');\n    return;\n  }\n\n  const str_genes = ArrayToStr(genes);\n  const str_organs = ArrayToStr(organs);\n  let whereCLAUSE = getFinalVerdictClause(finalVerdict); // console.log(genes, organs)\n\n  if (str_genes !== '') {\n    whereCLAUSE = whereCLAUSE + ' AND g.name IN ' + str_genes;\n  }\n\n  if (str_organs !== '') {\n    whereCLAUSE = whereCLAUSE + ' AND o.name IN ' + str_organs;\n  }\n\n  const query = `MATCH (g:MGene)-[r]->(o:Organ) ${whereCLAUSE} RETURN g,r,o`; // console.log('Gene->Orgran', query)\n\n  let session = driver.session();\n\n  try {\n    let res = await session.run(query);\n    let ids = new set();\n    let nodes = [];\n    let links = [];\n    res.records.foreach(row => {\n      let link = {\n        source: '',\n        target: ''\n      };\n      const source = row.get('g');\n\n      if (!ids.has(source.properties.name)) {\n        let node = {\n          id: source.identity,\n          name: source.properties.name,\n          nodetype: 'gene',\n          nodecolor: graphscheme.genenode,\n          fontcolor: graphscheme.genefont,\n          nodeval: graphscheme.nodeval,\n          noderelsize: graphscheme.noderelsize,\n          scalefont: graphscheme.scalefont\n        };\n        nodes.push(node);\n        link.source = node.name;\n        ids.add(node.name);\n      } else {\n        link.source = source.properties.name;\n      }\n\n      const target = row.get('o');\n\n      if (!ids.has(target.properties.name)) {\n        let node = {\n          id: target.identity,\n          name: target.properties.name,\n          nodetype: 'organ',\n          nodecolor: graphscheme.organnode,\n          fontcolor: graphscheme.organfont,\n          nodeval: graphscheme.nodeval,\n          noderelsize: graphscheme.noderelsize,\n          scalefont: graphscheme.scalefont\n        };\n        nodes.push(node);\n        link.target = node.name;\n        ids.add(node.name);\n      } else {\n        link.target = target.properties.name;\n      }\n\n      links.push(link);\n    }); // console.log(nodes) \n    // console.log(links) \n    // console.log('data loaded')\n\n    session.close();\n    ondata({\n      nodes,\n      links\n    });\n  } catch (e) {\n    throw e;\n  } finally {\n    await session.close();\n  }\n};\nexport const loadOrganData = async (driver, genes, organs, finalVerdict, graphScheme, onData) => {\n  // console.log('enter - loadData')\n  if (driver == null) {\n    console.log('Driver not loaded');\n    return;\n  }\n\n  const str_genes = ArrayToStr(genes);\n  const str_organs = ArrayToStr(organs);\n  let whereCLAUSE = getFinalVerdictClause(finalVerdict); // console.log(genes, organs)\n\n  if (str_genes !== '') {\n    whereCLAUSE = whereCLAUSE + ' AND g.name IN ' + str_genes;\n  }\n\n  if (str_organs !== '') {\n    whereCLAUSE = whereCLAUSE + ' AND o.name IN ' + str_organs;\n  }\n\n  const query = `MATCH (g:MGene)-[r]->(o:Organ) ${whereCLAUSE} RETURN g,r,o`; // console.log('Gene->Orgran', query)\n\n  let session = driver.session();\n\n  try {\n    let res = await session.run(query);\n    let ids = new Set();\n    let nodes = [];\n    let links = [];\n    res.records.forEach(row => {\n      let link = {\n        source: '',\n        target: ''\n      };\n      const source = row.get('o');\n\n      if (!ids.has(source.properties.name)) {\n        let node = {\n          id: source.identity,\n          name: source.properties.name,\n          nodeType: 'Organ',\n          nodeColor: graphScheme.organNode,\n          fontColor: graphScheme.organFont,\n          nodeVal: graphScheme.nodeVal,\n          nodeRelSize: graphScheme.nodeRelSize,\n          scaleFont: graphScheme.scaleFont\n        };\n        nodes.push(node);\n        link.source = node.name;\n        ids.add(node.name);\n      } else {\n        link.source = source.properties.name;\n      }\n\n      const target = row.get('g');\n\n      if (!ids.has(target.properties.name)) {\n        let node = {\n          id: target.identity,\n          name: target.properties.name,\n          nodeType: 'Gene',\n          nodeColor: graphScheme.geneNode,\n          fontColor: graphScheme.geneFont,\n          nodeVal: graphScheme.nodeVal,\n          nodeRelSize: graphScheme.nodeRelSize,\n          scaleFont: graphScheme.scaleFont\n        };\n        nodes.push(node);\n        link.target = node.name;\n        ids.add(node.name);\n      } else {\n        link.target = target.properties.name;\n      }\n\n      links.push(link);\n    }); // console.log('Data loaded')\n    // console.log(nodes) \n    // console.log(links) \n\n    session.close();\n    onData({\n      nodes,\n      links\n    });\n  } catch (e) {\n    throw e;\n  } finally {\n    await session.close();\n  }\n};\nexport const loadSyndromeGeneData = async (driver, syndromes, genes, finalVerdict, graphScheme, onData) => {\n  // console.log('enter - loadData')\n  if (driver == null) {\n    console.log('Driver not loaded');\n    return;\n  }\n\n  const str_genes = ArrayToStr(genes);\n  const str_syndrome = ArrayToStr(syndromes);\n  let whereCLAUSE = getFinalVerdictClause(finalVerdict); // console.log(genes, genes)\n\n  if (str_genes !== '') {\n    whereCLAUSE = whereCLAUSE + ' AND g.name IN ' + str_genes;\n  }\n\n  if (str_syndrome !== '') {\n    whereCLAUSE = whereCLAUSE + ' AND s.name IN ' + str_syndrome;\n  }\n\n  const query = `MATCH (g:MGene)-[r]->(s:Syndrome) ${whereCLAUSE} RETURN g,r,s`; // console.log('Syndrome->Gene', query)\n\n  let session = driver.session();\n\n  try {\n    let res = await session.run(query);\n    let ids = new Set();\n    let nodes = [];\n    let links = [];\n    res.records.forEach(row => {\n      let link = {\n        source: '',\n        target: ''\n      };\n      const source = row.get('s');\n\n      if (!ids.has(source.properties.name)) {\n        let node = {\n          id: source.identity,\n          name: source.properties.name,\n          nodeType: 'Syndrome',\n          nodeColor: graphScheme.syndromeNode,\n          fontColor: graphScheme.syndromeFont,\n          nodeVal: graphScheme.nodeVal,\n          nodeRelSize: graphScheme.nodeRelSize,\n          scaleFont: graphScheme.scaleFont\n        };\n        nodes.push(node);\n        link.source = node.name;\n        ids.add(node.name);\n      } else {\n        link.source = source.properties.name;\n      }\n\n      let target = row.get('g');\n\n      if (!ids.has(target.properties.name)) {\n        let node = {\n          id: target.identity,\n          name: target.properties.name,\n          nameType: 'Gene',\n          nodeColor: graphScheme.geneNode,\n          fontColor: graphScheme.geneFont,\n          nodeVal: graphScheme.nodeVal,\n          nodeRelSize: graphScheme.nodeRelSize,\n          scaleFont: graphScheme.scaleFont\n        };\n        nodes.push(node);\n        link.target = node.name;\n        ids.add(node.name);\n      } else {\n        link.target = target.properties.name;\n      }\n\n      links.push(link);\n    }); // console.log(nodes) \n    // console.log(links) \n    // console.log('Data loaded')\n\n    session.close();\n    onData({\n      nodes,\n      links\n    });\n  } catch (e) {\n    throw e;\n  } finally {\n    await session.close();\n  }\n};\nexport const loadSyndromeOrganData = async (driver, syndromes, organs, finalVerdict, graphScheme, onData) => {\n  // console.log('enter - loadData')\n  if (driver == null) {\n    console.log('Driver not loaded');\n    return;\n  }\n\n  const str_organs = ArrayToStr(organs);\n  const str_syndrome = ArrayToStr(syndromes);\n  let whereCLAUSE = getFinalVerdictClause(finalVerdict); // console.log(organs, organs)\n\n  if (str_organs !== '') {\n    whereCLAUSE = whereCLAUSE + ' AND o.name IN ' + str_organs;\n  }\n\n  if (str_syndrome !== '') {\n    whereCLAUSE = whereCLAUSE + ' AND s.name IN ' + str_syndrome;\n  }\n\n  const query = `MATCH (g:MGene)-[r]->(s:Syndrome), (g:MGene)-[r2]->(o:Organ) ${whereCLAUSE} RETURN o,r2,s`; // console.log('Syndrome->Gene', query)\n\n  let session = driver.session();\n\n  try {\n    let res = await session.run(query);\n    let ids = new Set();\n    let nodes = [];\n    let links = [];\n    res.records.forEach(row => {\n      let link = {\n        source: '',\n        target: ''\n      };\n      const target = row.get('o');\n\n      if (!ids.has(target.properties.name)) {\n        let node = {\n          id: target.identity,\n          name: target.properties.name,\n          nodeType: 'Organ',\n          nodeColor: graphScheme.organNode,\n          fontColor: graphScheme.organFont,\n          nodeVal: graphScheme.nodeVal,\n          nodeRelSize: graphScheme.nodeRelSize,\n          scaleFont: graphScheme.scaleFont\n        };\n        nodes.push(node);\n        link.target = node.name;\n        ids.add(node.name);\n      } else {\n        link.target = target.properties.name;\n      }\n\n      const source = row.get('s');\n\n      if (!ids.has(source.properties.name)) {\n        let node = {\n          id: source.identity,\n          name: source.properties.name,\n          nameType: 'Syndrome',\n          nodeColor: graphScheme.syndromeNode,\n          fontColor: graphScheme.syndromeFont,\n          nodeVal: graphScheme.nodeVal,\n          nodeRelSize: graphScheme.nodeRelSize,\n          scaleFont: graphScheme.scaleFont\n        };\n        nodes.push(node);\n        link.source = node.name;\n        ids.add(node.name);\n      } else {\n        link.source = source.properties.name;\n      }\n\n      links.push(link);\n    }); // console.log(nodes) \n    // console.log(links) \n    // console.log('Data loaded')\n\n    session.close();\n    onData({\n      nodes,\n      links\n    });\n  } catch (e) {\n    throw e;\n  } finally {\n    await session.close();\n  }\n};\nexport const loadSyndromeGeneOrganData = async (driver, syndromes, genes, organs, finalVerdict, graphScheme, onData) => {\n  // console.log('enter - loadData')\n  if (driver == null) {\n    console.log('Driver not loaded');\n    return;\n  }\n\n  const str_syndromes = ArrayToStr(syndromes);\n  const str_genes = ArrayToStr(genes);\n  const str_organs = ArrayToStr(organs);\n  let whereCLAUSE = getFinalVerdictClause(finalVerdict);\n\n  if (str_genes !== '') {\n    whereCLAUSE = whereCLAUSE + ' AND g.name IN ' + str_genes;\n  }\n\n  const query = `MATCH (g:MGene)-[r]->(s:Syndrome), (g:MGene)-[r2]->(o:Organ) ${whereCLAUSE} RETURN g,o,s`;\n  console.log('Syndrome->Gene-Organ', query);\n  let session = driver.session();\n\n  try {\n    let res = await session.run(query);\n    let ids = new Set();\n    let nodes = [];\n    let links = [];\n    res.records.forEach(row => {\n      let link1 = {\n        source: '',\n        target: ''\n      };\n      let source = row.get('s');\n\n      if (!ids.has(source.properties.name)) {\n        let node = {\n          id: source.identity,\n          name: source.properties.name,\n          nodeType: 'Symdrome',\n          nodeColor: graphScheme.syndromeNode,\n          fontColor: graphScheme.syndromeFont,\n          nodeVal: graphScheme.nodeVal,\n          nodeRelSize: graphScheme.nodeRelSize,\n          scaleFont: graphScheme.scaleFont\n        };\n        nodes.push(node);\n        link1.source = node.name;\n        ids.add(node.name);\n      } else {\n        link1.source = source.properties.name;\n      }\n\n      let target = row.get('g');\n\n      if (!ids.has(target.properties.name)) {\n        let node = {\n          id: target.identity,\n          name: target.properties.name,\n          nodeType: 'Gene',\n          nodeColor: graphScheme.geneNode,\n          fontColor: graphScheme.geneFont,\n          nodeVal: graphScheme.nodeVal,\n          nodeRelSize: graphScheme.nodeRelSize,\n          scaleFont: graphScheme.scaleFont\n        };\n        nodes.push(node);\n        link1.target = node.name;\n        ids.add(node.name);\n      } else {\n        link1.target = target.properties.name;\n      }\n\n      links.push(link1); // Do not push duplicate links\n      // console.log(\"link\",link1)\n\n      let link2 = {\n        source: '',\n        target: ''\n      };\n      link2.source = link1.target;\n      target = row.get('o');\n\n      if (!ids.has(target.properties.name)) {\n        let node = {\n          id: target.identity,\n          name: target.properties.name,\n          nodeType: 'Oragn',\n          nodeColor: graphScheme.organNode,\n          fontColor: graphScheme.organFont,\n          nodeVal: graphScheme.nodeVal,\n          nodeRelSize: graphScheme.nodeRelSize,\n          scaleFont: graphScheme.scaleFont\n        };\n        nodes.push(node);\n        link2.target = node.name;\n        ids.add(node.name);\n      } else {\n        link2.target = target.properties.name;\n      }\n\n      links.push(link2);\n    }); // console.log(nodes) \n    // console.log(links) \n    // console.log('Data loaded')\n\n    session.close();\n    onData({\n      nodes,\n      links\n    });\n  } catch (e) {\n    throw e;\n  } finally {\n    await session.close();\n  }\n};\nexport const loadDiseaseGeneData = async (driver, diseases, genes, finalVerdict, graphScheme, onData) => {\n  // console.log('enter - loadData')\n  if (driver == null) {\n    console.log('Driver not loaded');\n    return;\n  }\n\n  const str_diseases = ArrayToStr(diseases);\n  const str_genes = ArrayToStr(genes);\n  let whereCLAUSE = getFinalVerdictClause(finalVerdict);\n\n  if (str_diseases !== '') {\n    whereCLAUSE = whereCLAUSE + ' AND d.name IN ' + str_diseases;\n  }\n\n  if (str_genes !== '') {\n    whereCLAUSE = whereCLAUSE + ' AND g.name IN ' + str_genes;\n  }\n\n  const query = `MATCH (g:MGene)-[r:CAUSE]->(d:Disease) ${whereCLAUSE} RETURN g,r,d`; // console.log('Disease-gene', query)\n\n  let session = driver.session();\n\n  try {\n    let res = await session.run(query);\n    let ids = new Set();\n    let nodes = [];\n    let links = [];\n    res.records.forEach(row => {\n      let link1 = {\n        source: '',\n        target: ''\n      };\n      let source = row.get('g');\n\n      if (!ids.has(source.properties.name)) {\n        let node = {\n          id: source.identity,\n          name: source.properties.name,\n          nodeType: 'Gene',\n          nodeColor: graphScheme.geneNode,\n          fontColor: graphScheme.geneFont,\n          nodeVal: graphScheme.nodeVal,\n          nodeRelSize: graphScheme.nodeRelSize,\n          scaleFont: graphScheme.scaleFont\n        };\n        nodes.push(node);\n        link1.source = node.name;\n        ids.add(node.name);\n      } else {\n        link1.source = source.properties.name;\n      }\n\n      let target = row.get('d');\n\n      if (!ids.has(target.properties.name)) {\n        let node = {\n          id: target.identity,\n          name: target.properties.name,\n          nodeType: 'Disease',\n          nodeColor: graphScheme.diseaseNode,\n          fontColor: graphScheme.diseaseFont,\n          nodeVal: graphScheme.nodeVal,\n          nodeRelSize: graphScheme.nodeRelSize,\n          scaleFont: graphScheme.scaleFont\n        };\n        nodes.push(node);\n        link1.target = node.name;\n        ids.add(node.name);\n      } else {\n        link1.target = target.properties.name;\n      }\n\n      links.push(link1);\n    }); // console.log(nodes) \n    // console.log(links) \n    // console.log('Data loaded')\n\n    session.close();\n    onData({\n      nodes,\n      links\n    });\n  } catch (e) {\n    throw e;\n  } finally {\n    await session.close();\n  }\n};","map":{"version":3,"names":["ArrayToStr","getFinalVerdictClause","finalVerdict","whereClause","loadGene","driver","onData","console","log","query","session","res","run","ids","Set","nodes","links","records","foreach","row","link","source","target","get","has","properties","name","node","id","identity","nodetype","nodecolor","graphscheme","genenode","fontcolor","genefont","nodeval","noderelsize","scalefont","push","add","organnode","organfont","close","ondata","e","loadGeneData","genes","organs","graphScheme","str_genes","str_organs","whereCLAUSE","set","loadOrganData","forEach","nodeType","nodeColor","organNode","fontColor","organFont","nodeVal","nodeRelSize","scaleFont","geneNode","geneFont","loadSyndromeGeneData","syndromes","str_syndrome","syndromeNode","syndromeFont","nameType","loadSyndromeOrganData","loadSyndromeGeneOrganData","str_syndromes","link1","link2","loadDiseaseGeneData","diseases","str_diseases","diseaseNode","diseaseFont"],"sources":["/Users/zack/src/_-MUSC/gene-graph-MUSC/src/tools/graphdata.ts"],"sourcesContent":["\nimport { GraphScheme, Force2DData, ArrayToStr } from './graphtools'\nimport { Driver }  from  'neo4j-driver'\n\n\nconst getFinalVerdictClause = (finalVerdict: string) => {\n    let whereClause = ''\n\n    if ( finalVerdict === 'Confirmed' ) {\n        whereClause = 'WHERE g.FinalVerdict = 1'\n    } else if ( finalVerdict === 'Maybe') {\n        whereClause = 'WHERE g.FinalVerdict = 9'\n    } else {\n        whereClause = 'WHERE g.FinalVerdict in [0,1,9]'\n    }\n    return whereClause\n}\n\nexport const loadGene= async (driver: Driver | undefined, \n    onData:(data:string[])=> void\n) => {\n\n    if (driver == null) {\n        console.log('Driver not loaded')\n        return \n    }\n\n    const query = `MATCH (g:MGene) RETURN DISTINCT g.name as name ORDER BY name`\n    let session = driver.session()\n\n    try {\n        let res = await session.run(query)\n        let ids = new Set<string>()\n        let nodes : any[] = []\n        let links : any[] = []\n        res.records.foreach(row => {\n            let link  = { source: '', target: ''}\n            const source = row.get('g') \n            if (!ids.has(source.properties.name)) {\n                let node = { \n                    id: source.identity,\n                    name: source.properties.name,\n                    nodetype: 'gene',\n                    nodecolor: graphscheme.genenode, \n                    fontcolor: graphscheme.genefont,\n                    nodeval: graphscheme.nodeval,\n                    noderelsize: graphscheme.noderelsize,\n                    scalefont: graphscheme.scalefont\n                }\n                nodes.push(node) \n                link.source = node.name\n                ids.add(node.name)\n            } else {\n                link.source = source.properties.name\n            }\n        \n            const target = row.get('o') \n            if (!ids.has(target.properties.name)) {\n                let node = { \n                    id: target.identity,\n                    name: target.properties.name,\n                    nodetype: 'organ',\n                    nodecolor: graphscheme.organnode,\n                    fontcolor: graphscheme.organfont,\n                    nodeval: graphscheme.nodeval,\n                    noderelsize: graphscheme.noderelsize,\n                    scalefont: graphscheme.scalefont\n                }\n                nodes.push(node) \n                link.target = node.name\n                ids.add(node.name)\n            } else {\n                link.target = target.properties.name\n            }\n\n            links.push(link)\n\n        })\n        // console.log(nodes) \n        // console.log(links) \n        // console.log('data loaded')\n        session.close();\n        ondata( {nodes, links} )\n    } catch (e) {\n        throw e\n    }\n    finally {\n        await session.close()\n\n    }\n}\n\n\n\n\n\nexport const  loadGeneData = async (driver: Driver | undefined,\n    genes: string[],\n    organs: string[],\n    finalVerdict: string,\n    graphScheme : GraphScheme,\n    onData:(data: Force2DData)=> void) => {\n\n    // console.log('enter - loadData')\n\n    if (driver == null) {\n        console.log('Driver not loaded')\n        return \n    }\n\n    const str_genes = ArrayToStr(genes)\n    const str_organs = ArrayToStr(organs)\n\n    let whereCLAUSE = getFinalVerdictClause(finalVerdict)\n\n    // console.log(genes, organs)\n\n    if ( str_genes !== '') {\n        whereCLAUSE = whereCLAUSE + ' AND g.name IN ' + str_genes\n    }\n    if ( str_organs !== '') {\n        whereCLAUSE = whereCLAUSE + ' AND o.name IN ' + str_organs\n    }\n    const query = `MATCH (g:MGene)-[r]->(o:Organ) ${whereCLAUSE} RETURN g,r,o`\n\n    // console.log('Gene->Orgran', query)\n\n    let session = driver.session()\n\n    try {\n        let res = await session.run(query)\n        let ids = new  set<string>()\n        let nodes : any[] = []\n        let links : any[] = []\n        res.records.foreach(row => {\n            let link  = { source: '', target: ''}\n            const source = row.get('g') \n            if (!ids.has(source.properties.name)) {\n                let node = { \n                    id: source.identity,\n                    name: source.properties.name,\n                    nodetype: 'gene',\n                    nodecolor: graphscheme.genenode, \n                    fontcolor: graphscheme.genefont,\n                    nodeval: graphscheme.nodeval,\n                    noderelsize: graphscheme.noderelsize,\n                    scalefont: graphscheme.scalefont\n                }\n                nodes.push(node) \n                link.source = node.name\n                ids.add(node.name)\n            } else {\n                link.source = source.properties.name\n            }\n        \n            const target = row.get('o') \n            if (!ids.has(target.properties.name)) {\n                let node = { \n                    id: target.identity,\n                    name: target.properties.name,\n                    nodetype: 'organ',\n                    nodecolor: graphscheme.organnode,\n                    fontcolor: graphscheme.organfont,\n                    nodeval: graphscheme.nodeval,\n                    noderelsize: graphscheme.noderelsize,\n                    scalefont: graphscheme.scalefont\n                }\n                nodes.push(node) \n                link.target = node.name\n                ids.add(node.name)\n            } else {\n                link.target = target.properties.name\n            }\n\n            links.push(link)\n\n        })\n        // console.log(nodes) \n        // console.log(links) \n        // console.log('data loaded')\n        session.close();\n        ondata( {nodes, links} )\n    } catch (e) {\n        throw e\n    }\n    finally {\n        await session.close()\n\n    }\n}\n\n\nexport const  loadOrganData = async (driver: Driver | undefined,\n    genes: string[],\n    organs: string[],\n    finalVerdict : string,\n    graphScheme : GraphScheme,\n    onData:(data: Force2DData)=> void) => {\n\n    // console.log('enter - loadData')\n\n    if (driver == null) {\n        console.log('Driver not loaded')\n        return \n    }\n\n    const str_genes = ArrayToStr(genes)\n    const str_organs = ArrayToStr(organs)\n\n    let whereCLAUSE = getFinalVerdictClause(finalVerdict)\n\n    // console.log(genes, organs)\n    if ( str_genes !== '') {\n        whereCLAUSE = whereCLAUSE + ' AND g.name IN ' + str_genes\n    }\n    if ( str_organs !== '') {\n        whereCLAUSE = whereCLAUSE + ' AND o.name IN ' + str_organs\n    }\n    const query = `MATCH (g:MGene)-[r]->(o:Organ) ${whereCLAUSE} RETURN g,r,o`\n\n    // console.log('Gene->Orgran', query)\n\n    let session = driver.session()\n\n    try {\n        let res = await session.run(query)\n        let ids = new  Set<string>()\n        let nodes : any[] = []\n        let links : any[] = []\n        res.records.forEach(row => {\n            let link  = { source: '', target: ''}\n        \n            const source = row.get('o') \n            if (!ids.has(source.properties.name)) {\n                let node = { \n                    id: source.identity,\n                    name: source.properties.name,\n                    nodeType: 'Organ',\n                    nodeColor: graphScheme.organNode,\n                    fontColor: graphScheme.organFont,\n                    nodeVal: graphScheme.nodeVal,\n                    nodeRelSize: graphScheme.nodeRelSize,\n                    scaleFont: graphScheme.scaleFont\n                }\n                nodes.push(node) \n                link.source = node.name\n                ids.add(node.name)\n            } else {\n                link.source = source.properties.name\n            }\n\n            const target = row.get('g') \n            if (!ids.has(target.properties.name)) {\n                let node = { \n                    id: target.identity,\n                    name: target.properties.name,\n                    nodeType: 'Gene',\n                    nodeColor: graphScheme.geneNode, \n                    fontColor: graphScheme.geneFont,\n                    nodeVal: graphScheme.nodeVal,\n                    nodeRelSize: graphScheme.nodeRelSize,\n                    scaleFont: graphScheme.scaleFont\n                }\n                nodes.push(node) \n                link.target = node.name\n                ids.add(node.name)\n            } else {\n                link.target = target.properties.name\n            }\n            links.push(link)\n\n        })\n        // console.log('Data loaded')\n        // console.log(nodes) \n        // console.log(links) \n        session.close();\n        onData( {nodes, links} )\n    } catch (e) {\n        throw e\n    }\n    finally {\n        await session.close()\n\n    }\n}\n\nexport const  loadSyndromeGeneData = async (driver: Driver | undefined,\n    syndromes: string[],\n    genes: string[],\n    finalVerdict:string,\n    graphScheme : GraphScheme,\n    onData:(data: Force2DData)=> void) => {\n\n    // console.log('enter - loadData')\n\n    if (driver == null) {\n        console.log('Driver not loaded')\n        return \n    }\n\n    const str_genes = ArrayToStr(genes)\n    const str_syndrome = ArrayToStr(syndromes)\n\n    let whereCLAUSE = getFinalVerdictClause(finalVerdict)\n\n    // console.log(genes, genes)\n    if ( str_genes !== '') {\n        whereCLAUSE = whereCLAUSE + ' AND g.name IN ' + str_genes\n    }\n    if ( str_syndrome !== '') {\n        whereCLAUSE = whereCLAUSE + ' AND s.name IN ' + str_syndrome\n    }\n\n    const query = `MATCH (g:MGene)-[r]->(s:Syndrome) ${whereCLAUSE} RETURN g,r,s`\n\n    // console.log('Syndrome->Gene', query)\n\n    let session = driver.session()\n\n    try {\n        let res = await session.run(query)\n        let ids = new  Set<string>()\n        let nodes : any[] = []\n        let links : any[] = []\n        res.records.forEach(row => {\n            let link  = { source: '', target: ''}\n        \n            const source = row.get('s') \n            if (!ids.has(source.properties.name)) {\n                let node = { \n                    id: source.identity,\n                    name: source.properties.name,\n                    nodeType: 'Syndrome',\n                    nodeColor: graphScheme.syndromeNode,\n                    fontColor: graphScheme.syndromeFont,\n                    nodeVal: graphScheme.nodeVal,\n                    nodeRelSize: graphScheme.nodeRelSize,\n                    scaleFont: graphScheme.scaleFont\n                }\n                nodes.push(node) \n                link.source = node.name\n                ids.add(node.name)\n            } else {\n                link.source = source.properties.name\n            }\n\n           let target = row.get('g') \n            if (!ids.has(target.properties.name)) {\n                let node = { \n                    id: target.identity,\n                    name: target.properties.name,\n                    nameType: 'Gene',\n                    nodeColor: graphScheme.geneNode, \n                    fontColor: graphScheme.geneFont,\n                    nodeVal: graphScheme.nodeVal,\n                    nodeRelSize: graphScheme.nodeRelSize,\n                    scaleFont: graphScheme.scaleFont\n                }\n                nodes.push(node) \n                link.target = node.name\n                ids.add(node.name)\n            } else {\n                link.target = target.properties.name\n            }\n            links.push(link)\n\n        })\n        // console.log(nodes) \n        // console.log(links) \n        // console.log('Data loaded')\n        session.close();\n        onData( {nodes, links} )\n    } catch (e) {\n        throw e\n    }\n    finally {\n        await session.close()\n\n    }\n}\n\nexport const  loadSyndromeOrganData = async (\n    driver: Driver | undefined,\n    syndromes: string[],\n    organs: string[],\n    finalVerdict: string,\n    graphScheme : GraphScheme,\n    onData:(data: Force2DData)=> void) => {\n    // console.log('enter - loadData')\n    if (driver == null) {\n        console.log('Driver not loaded')\n        return \n    }\n\n    const str_organs = ArrayToStr(organs)\n    const str_syndrome = ArrayToStr(syndromes)\n\n    let whereCLAUSE = getFinalVerdictClause(finalVerdict)\n\n    // console.log(organs, organs)\n    if ( str_organs !== '') {\n        whereCLAUSE = whereCLAUSE + ' AND o.name IN ' + str_organs\n    }\n    if ( str_syndrome !== '') {\n        whereCLAUSE = whereCLAUSE + ' AND s.name IN ' + str_syndrome\n    }\n\n    const query = `MATCH (g:MGene)-[r]->(s:Syndrome), (g:MGene)-[r2]->(o:Organ) ${whereCLAUSE} RETURN o,r2,s`\n\n    // console.log('Syndrome->Gene', query)\n\n    let session = driver.session()\n\n    try {\n        let res = await session.run(query)\n        let ids = new  Set<string>()\n        let nodes : any[] = []\n        let links : any[] = []\n        res.records.forEach(row => {\n            let link  = { source: '', target: ''}\n            const target = row.get('o') \n            if (!ids.has(target.properties.name)) {\n                let node = { \n                    id: target.identity,\n                    name: target.properties.name,\n                    nodeType: 'Organ',\n                    nodeColor: graphScheme.organNode, \n                    fontColor: graphScheme.organFont,\n                    nodeVal: graphScheme.nodeVal,\n                    nodeRelSize: graphScheme.nodeRelSize,\n                    scaleFont: graphScheme.scaleFont\n                }\n                nodes.push(node) \n                link.target = node.name\n                ids.add(node.name)\n            } else {\n                link.target = target.properties.name\n            }\n        \n            const source = row.get('s') \n            if (!ids.has(source.properties.name)) {\n                let node = { \n                    id: source.identity,\n                    name: source.properties.name,\n                    nameType: 'Syndrome',\n                    nodeColor: graphScheme.syndromeNode,\n                    fontColor: graphScheme.syndromeFont,\n                    nodeVal: graphScheme.nodeVal,\n                    nodeRelSize: graphScheme.nodeRelSize,\n                    scaleFont: graphScheme.scaleFont\n                }\n                nodes.push(node) \n                link.source = node.name\n                ids.add(node.name)\n            } else {\n                link.source = source.properties.name\n            }\n\n            links.push(link)\n\n        })\n        // console.log(nodes) \n        // console.log(links) \n        // console.log('Data loaded')\n        session.close();\n        onData( {nodes, links} )\n    } catch (e) {\n        throw e\n    }\n    finally {\n        await session.close()\n\n    }\n}\n\nexport const  loadSyndromeGeneOrganData = async (\n    driver: Driver | undefined,\n    syndromes: string[],\n    genes: string[],\n    organs: string[],\n    finalVerdict: string,\n    graphScheme : GraphScheme,\n    onData:(data: Force2DData)=> void) => {\n    // console.log('enter - loadData')\n    if (driver == null) {\n        console.log('Driver not loaded')\n        return \n    }\n\n    const str_syndromes = ArrayToStr(syndromes)\n    const str_genes = ArrayToStr(genes)\n    const str_organs = ArrayToStr(organs)\n\n    let whereCLAUSE = getFinalVerdictClause(finalVerdict)\n    \n    if ( str_genes !== '') {\n        whereCLAUSE = whereCLAUSE + ' AND g.name IN ' + str_genes\n    }\n\n    const query = \n        `MATCH (g:MGene)-[r]->(s:Syndrome), (g:MGene)-[r2]->(o:Organ) ${whereCLAUSE} RETURN g,o,s`\n\n    console.log('Syndrome->Gene-Organ', query)\n\n    let session = driver.session()\n\n    try {\n        let res = await session.run(query)\n        let ids = new  Set<string>()\n        let nodes : any[] = []\n        let links : any[] = []\n        res.records.forEach(row => {\n            let link1  = { source: '', target: ''}\n            let source = row.get('s') \n            if (!ids.has(source.properties.name)) {\n                let node = { \n                    id: source.identity,\n                    name: source.properties.name,\n                    nodeType: 'Symdrome',\n                    nodeColor: graphScheme.syndromeNode,\n                    fontColor: graphScheme.syndromeFont,\n                    nodeVal: graphScheme.nodeVal,\n                    nodeRelSize: graphScheme.nodeRelSize,\n                    scaleFont: graphScheme.scaleFont\n                }\n                nodes.push(node) \n                link1.source = node.name\n                ids.add(node.name)\n            } else {\n                link1.source = source.properties.name\n            }\n\n            let target = row.get('g') \n            if (!ids.has(target.properties.name)) {\n                let node = { \n                    id: target.identity,\n                    name: target.properties.name,\n                    nodeType: 'Gene',\n                    nodeColor: graphScheme.geneNode, \n                    fontColor: graphScheme.geneFont,\n                    nodeVal: graphScheme.nodeVal,\n                    nodeRelSize: graphScheme.nodeRelSize,\n                    scaleFont: graphScheme.scaleFont\n                }\n                nodes.push(node) \n                link1.target = node.name\n                ids.add(node.name)\n            } else {\n                link1.target = target.properties.name\n            }\n            links.push(link1)\n            // Do not push duplicate links\n            // console.log(\"link\",link1)\n            let link2 = { source: '', target: ''}\n\n            link2.source = link1.target\n            target = row.get('o') \n            if (!ids.has(target.properties.name)) {\n                let node = { \n                    id: target.identity,\n                    name: target.properties.name,\n                    nodeType: 'Oragn',\n                    nodeColor: graphScheme.organNode,\n                    fontColor: graphScheme.organFont,\n                    nodeVal: graphScheme.nodeVal,\n                    nodeRelSize: graphScheme.nodeRelSize,\n                    scaleFont: graphScheme.scaleFont\n                }\n                nodes.push(node) \n                link2.target = node.name\n                ids.add(node.name)\n            } else {\n                link2.target = target.properties.name\n            }\n\n            links.push(link2)\n\n        })\n        // console.log(nodes) \n        // console.log(links) \n        // console.log('Data loaded')\n        session.close();\n        onData( {nodes, links} )\n    } catch (e) {\n        throw e\n    }\n    finally {\n        await session.close()\n\n    }\n}\n\nexport const  loadDiseaseGeneData = async (\n    driver: Driver | undefined,\n    diseases: string[],\n    genes: string[],\n    finalVerdict: string,\n    graphScheme : GraphScheme,\n    onData:(data: Force2DData)=> void) => {\n    // console.log('enter - loadData')\n    if (driver == null) {\n        console.log('Driver not loaded')\n        return \n    }\n\n    const str_diseases = ArrayToStr(diseases)\n    const str_genes = ArrayToStr(genes)\n\n    let whereCLAUSE = getFinalVerdictClause(finalVerdict)\n    \n    if ( str_diseases !== '') {\n        whereCLAUSE = whereCLAUSE + ' AND d.name IN ' + str_diseases\n    }\n    if ( str_genes !== '') {\n        whereCLAUSE = whereCLAUSE + ' AND g.name IN ' + str_genes\n    }\n\n    const query = \n        `MATCH (g:MGene)-[r:CAUSE]->(d:Disease) ${whereCLAUSE} RETURN g,r,d`\n\n    // console.log('Disease-gene', query)\n\n    let session = driver.session()\n\n    try {\n        let res = await session.run(query)\n        let ids = new  Set<string>()\n        let nodes : any[] = []\n        let links : any[] = []\n        res.records.forEach(row => {\n            let link1  = { source: '', target: ''}\n            let source = row.get('g') \n            if (!ids.has(source.properties.name)) {\n                let node = { \n                    id: source.identity,\n                    name: source.properties.name,\n                    nodeType: 'Gene',\n                    nodeColor: graphScheme.geneNode,\n                    fontColor: graphScheme.geneFont,\n                    nodeVal: graphScheme.nodeVal,\n                    nodeRelSize: graphScheme.nodeRelSize,\n                    scaleFont: graphScheme.scaleFont\n                }\n                nodes.push(node) \n                link1.source = node.name\n                ids.add(node.name)\n            } else {\n                link1.source = source.properties.name\n            }\n\n            let target = row.get('d') \n            if (!ids.has(target.properties.name)) {\n                let node = { \n                    id: target.identity,\n                    name: target.properties.name,\n                    nodeType: 'Disease',\n                    nodeColor: graphScheme.diseaseNode, \n                    fontColor: graphScheme.diseaseFont,\n                    nodeVal: graphScheme.nodeVal,\n                    nodeRelSize: graphScheme.nodeRelSize,\n                    scaleFont: graphScheme.scaleFont\n                }\n                nodes.push(node) \n                link1.target = node.name\n                ids.add(node.name)\n            } else {\n                link1.target = target.properties.name\n            }\n            links.push(link1)\n\n        })\n        // console.log(nodes) \n        // console.log(links) \n        // console.log('Data loaded')\n        session.close();\n        onData( {nodes, links} )\n    } catch (e) {\n        throw e\n    }\n    finally {\n        await session.close()\n\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}